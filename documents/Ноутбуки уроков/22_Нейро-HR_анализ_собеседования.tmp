[{"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n\n# \u0413\u043e\u0442\u043e\u0432\u0438\u043c \u0434\u0438\u0430\u043b\u043e\u0433:\n!pip install langchain==0.0.345 openai==1.2.3 tiktoken==0.5.1 pydantic==1.10.8 faiss-cpu==1.7.4\nimport os\n\nimport re\n\nfrom datetime import timedelta\n\nimport time\n\nfrom IPython.display import HTML, clear_output\n\nimport subprocess\n\nfrom pathlib import Path\n\nimport json\n\nimport ipywidgets as widgets\n\nfrom IPython.display import display\n\nfrom tqdm.auto import tqdm\n\nimport getpass\n\nimport pickle\n\n#import torch\n\n#import whisper\n\nimport openai\n\nimport codecs\n\nfrom langchain.chains import ConversationChain         # \u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u043a\u043b\u0430\u0441\u0441 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0446\u0435\u043f\u043e\u0447\u0435\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432\n\nfrom langchain.chat_models import ChatOpenAI           # \u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u043a\u043b\u0430\u0441\u0441 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0447\u0430\u0442\u0430\u043c\u0438 \u043d\u0430 \u0431\u0430\u0437\u0435 OpenAI\n\nfrom langchain.llms import OpenAI\n\nfrom langchain.memory import ConversationBufferMemory  # \u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u043a\u043b\u0430\u0441\u0441 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u043c\u044f\u0442\u044c\u044e \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432\n\nfrom langchain.text_splitter import MarkdownHeaderTextSplitter, Document, RecursiveCharacterTextSplitter, CharacterTextSplitter\n\nfrom langchain.schema import (\n\n    AIMessage,\n\n    HumanMessage,\n\n    SystemMessage\n\n)\n\nfrom google.colab import drive\n\nfrom langchain.docstore.document import Document\n\nfrom langchain.embeddings.openai import OpenAIEmbeddings\n\nfrom langchain.vectorstores import Chroma, FAISS\n\nfrom langchain.text_splitter import CharacterTextSplitter, RecursiveCharacterTextSplitter\n\nfrom langchain.prompts import PromptTemplate\n\nimport pathlib\n\nimport tempfile\n\nfrom IPython.display import HTML\n\nimport requests\n\n# \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0439\n\nimport warnings\n\nwarnings.filterwarnings(\"ignore\")\n\nimport logging\n\nlogging.getLogger(\"langchain.text_splitter\").setLevel(logging.ERROR)\n\nlogging.getLogger(\"chromadb\").setLevel(logging.ERROR)\n\nfrom google.colab import output\n\nimport tiktoken\n\nos.environ[\"OPENAI_API_KEY\"] = getpass.getpass(\"OpenAI API Key:\")\n\nopenai.api_key = os.environ[\"OPENAI_API_KEY\"]\ndef load_document_text(url: str) -> str:\n\n    # Extract the document ID from the URL\n\n    match_ = re.search('/document/d/([a-zA-Z0-9-_]+)', url)\n\n    if match_ is None:\n\n        raise ValueError('Invalid Google Docs URL')\n\n    doc_id = match_.group(1)\n\n\n\n    # Download the document as plain text\n\n    response = requests.get(f'https://docs.google.com/document/d/{doc_id}/export?format=txt')\n\n    response.raise_for_status()\n\n    text = response.text\n\n\n\n    return text\nurl = \"https://docs.google.com/document/d/14PDkow15jxyAXsm0l196aefbRPmpYd3v0iJe0sPupY8/edit?usp=sharing\"\n\ndialogue = load_document_text(url)\n# \u0432\u043e\u0442 \u0432 \u0442\u0430\u043a\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u0443 \u043d\u0430\u0441 \u0434\u0438\u0430\u043b\u043e\u0433 - \u0435\u0441\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u0440\u043e\u043b\u044f\u043c \u0438 \u0442\u0430\u0439\u043c\u0438\u043d\u0433\u0438:\n\ndialogue\n# \u0432\u044b\u0434\u0435\u043b\u044f\u0435\u043c \u0442\u043e, \u0447\u0442\u043e \u0433\u043e\u0432\u043e\u0440\u0438\u043b HR \u0438 \u0442\u043e, \u0447\u0442\u043e \u0433\u043e\u0432\u043e\u0440\u0438\u043b \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c, \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b - \u043d\u0430\u043c \u044d\u0442\u043e \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0432 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u043f\u0440\u0438 \u0430\u043d\u0430\u043b\u0438\u0437\u0435\n\n\n\nhr_part = []  # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u0435\u0439 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 HR\n\napplicant_part = []  # \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u0435\u0439 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f\n\ncurrent_speaker = None\n\n\n\n# \u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0435\u043c \u0434\u0438\u0430\u043b\u043e\u0433 \u043f\u043e \u0440\u043e\u043b\u044f\u043c\n\nfor line in dialogue.strip().split('\\n'):\n\n    if 'HR:' in line:\n\n        current_speaker = 'HR'\n\n        hr_part.append(line)  # \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a\n\n    elif '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c:' in line:\n\n        current_speaker = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c'\n\n        applicant_part.append(line)  # \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a\n\n    else:\n\n        if current_speaker == 'HR':\n\n            hr_part[-1] += ' ' + line  # \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043a \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443 \u0441\u043f\u0438\u0441\u043a\u0430\n\n        elif current_speaker == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c':\n\n            applicant_part[-1] += ' ' + line  # \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043a \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443 \u0441\u043f\u0438\u0441\u043a\u0430\n\n\n\n# \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u0432 \u0441\u0442\u0440\u043e\u043a\u0438\n\nhr_part = '\\n'.join(hr_part)\n\napplicant_part = '\\n'.join(applicant_part)\nhr_part\n\n# \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\ndef create_embedding(data, chunk_size, chunk_overlap=0):\n\n    # \u0412\u044b\u0431\u043e\u0440 \u043c\u0435\u0442\u043e\u0434\u0430 \u0440\u0430\u0437\u0431\u0438\u0435\u043d\u0438\u044f \u0442\u0435\u043a\u0441\u0442\u0430 \u043d\u0430 \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u044b\n\n    splitter = RecursiveCharacterTextSplitter(chunk_size=chunk_size, chunk_overlap=chunk_overlap, separators=[\"\\n\"])\n\n    source_chunks = splitter.create_documents([data], metadatas=[{\"meta\": \"meta\"}])\n\n\n\n    # \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0433\u043e \u0438\u043d\u0434\u0435\u043a\u0441\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432\n\n    search_index = FAISS.from_documents(source_chunks, OpenAIEmbeddings())\n\n    return search_index  # \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0433\u043e \u0438\u043d\u0434\u0435\u043a\u0441\u0430\n\n\n\ndef insert_newlines(text: str, max_len: int = 170) -> str:\n\n    words = text.split()\n\n    lines = []\n\n    current_line = \"\"\n\n    for word in words:\n\n        if len(current_line + \" \" + word) > max_len:\n\n            lines.append(current_line)\n\n            current_line = \"\"\n\n        current_line += \" \" + word\n\n    lines.append(current_line)\n\n    return \"\\n\".join(lines)\n\n\n\ndef answer_user_question(system_doc_text: str, knowledge_base_text, topic: str,\n\n                         instructions: str, temperature: float, verbose: int, k: int, chunk_size: int, chunk_overlap: int, model: str) -> str:\n\n\n\n    # \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0438\u043d\u0434\u0435\u043a\u0441\u044b \u043f\u043e\u0438\u0441\u043a\u0430\n\n    knowledge_base_index = create_embedding(knowledge_base_text, chunk_size, chunk_overlap)\n\n    # \u0418\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0445\u043e\u0436\u0438\u0445 \u043e\u0442\u0440\u0435\u0437\u043a\u043e\u0432 \u0442\u0435\u043a\u0441\u0442\u0430 \u0438\u0437 \u0431\u0430\u0437\u044b \u0437\u043d\u0430\u043d\u0438\u0439 \u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438\n\n    answer_text = answer_index(system_doc_text, topic, instructions, knowledge_base_index, temp=temperature, verbose=verbose, k=k, model=model)\n\n\n\n    return insert_newlines(answer_text)\n\n\n\ndef answer_index(system, topic, instructions, search_index, temp=0, verbose=0, k=5, model='gpt-3.5-turbo'):\n\n\n\n    # Selecting documents similar to the question\n\n    # docs = search_index.similarity_search(topic, k=k)\n\n    docs = search_index.similarity_search_with_score(topic, k=k)\n\n    if verbose: print('===========================================')\n\n    message_content = re.sub(r'\\n{2}', ' ', '\\n '.join([f'\u041e\u0442\u0440\u044b\u0432\u043e\u043a \u0442\u0435\u043a\u0441\u0442\u0430 \u2116{i+1}\\n=====================\\n' + doc[0].page_content + '\\n' for i, doc in enumerate(docs)]))\n\n    if verbose: print('message_content:\\n ========================================\\n',\n\n                         re.sub(r'\\n{2}', ' ', '\\n '.join([f'\\n\u041e\u0442\u0440\u044b\u0432\u043e\u043a \u0442\u0435\u043a\u0441\u0442\u0430 \u2116{i+1} \u041e\u0446\u0435\u043d\u043a\u0430 \u0441\u0445\u043e\u0436\u0435\u0441\u0442\u0438: {doc[1]}\\n=====================\\n' + doc[0].page_content + '\\n' for i, doc in enumerate(docs)])))\n\n\n\n    messages = [\n\n        {\"role\": \"system\", \"content\": system},\n\n        {\"role\": \"user\", \"content\": f\"{instructions}\\n\\n\u0422\u0435\u043a\u0441\u0442\u044b \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430:\\n{message_content}\"}\n\n    ]\n\n\n\n    completion = openai.chat.completions.create(\n\n        model=model,\n\n        messages=messages,\n\n        temperature=temp\n\n    )\n\n\n\n    answer = completion.choices[0].message.content\n\n    return answer  # \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442 \u0432\u043c\u0435\u0441\u0442\u043e \u0435\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u0430\n\n\n\n\n\ndef answer_user_question_from_answer(system, instructions, answers_content, temp=0, verbose=0, model='gpt-3.5-turbo'):\n\n\n\n    if verbose: print('===========================================')\n\n    if verbose: print(f'\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0430:\\n{answers_content}')\n\n    messages = [\n\n        {\"role\": \"system\", \"content\": system},\n\n        {\"role\": \"user\", \"content\": f\"{instructions}\\n\\n\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0430:\\n{answers_content}\"}\n\n    ]\n\n\n\n    if verbose: print('===========================================\\n')\n\n\n\n    completion = openai.chat.completions.create(\n\n        model=model,\n\n        messages=messages,\n\n        temperature=temp\n\n    )\n\n    answer = completion.choices[0].message.content\n\n    return insert_newlines(answer)  # \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442 \u0432\u043c\u0435\u0441\u0442\u043e \u0435\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u0430\n\n\n\ndef simple_gpt_answer(system, user_assist, assistant, user, temp=0, model='gpt-3.5-turbo-1106'):\n\n    messages = [\n\n        {\"role\": \"system\", \"content\": system},\n\n        {\"role\": \"user\", \"content\": user_assist},\n\n        {'role':'assistant', 'content': assistant},\n\n        {\"role\": \"user\", \"content\": f\"{user}\"}\n\n\n\n    ]\n\n    completion = openai.chat.completions.create(\n\n        model=model,\n\n        messages=messages,\n\n        temperature=temp\n\n    )\n\n    answer = completion.choices[0].message.content\n\n    return insert_newlines(answer)  # \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0442\u0432\u0435\u0442 \u0432\u043c\u0435\u0441\u0442\u043e \u0435\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u0430\n\n\n\ndef num_tokens_from_string(string: str, encoding_name: str) -> int:\n\n    \"\"\"Returns the number of tokens in a text string.\"\"\"\n\n    encoding = tiktoken.get_encoding(encoding_name)\n\n    num_tokens = len(encoding.encode(string))\n\n    return num_tokens\n\n\n\n\n# \u0423\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 HR\nHR_requests = []  # \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0443\u0441\u0442\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0440\u043e\u043a\n\n\n\nwhile True:\n\n    user_input = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0431\u0443\u0434\u0443\u0442 \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u043e\u0432\u0430 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c (\u0438\u043b\u0438 \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 'exit' \u0434\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f): \")\n\n    if user_input.lower() == 'exit':\n\n        break\n\n    HR_requests.append(user_input)\nHR_requests\n\n# \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0438 \u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u044e \"\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\"\nsystem_QG = \"\u0422\u044b-\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a HR \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 '\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430'. \u0422\u044b \u0432\u0441\u0435\u0433\u0434\u0430 \u0442\u043e\u0447\u043d\u043e \u0441\u043b\u0435\u0434\u0443\u0435\u0448\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c\"\n\nuser_assist_QG = \"\"\"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0439 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432, \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 HR \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430 \u043c\u043e\u0433 \u0431\u044b \u0431\u044b\u043b\u043e \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u0443 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0430\u0441\u043f\u0435\u043a\u0442:\n\n\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0438\u0434\u0435\u0438, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0442\u044c \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0434\u043b\u044f \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u0439\"\"\"\n\nassist_QG = \"\"\"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438, \u043a\u043e\u0433\u0434\u0430 \u0432\u0430\u043c \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0440\u0435\u0448\u0438\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443 \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c.\n\n\u041f\u0440\u0438\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u043b\u0438 \u043d\u043e\u0432\u0430\u0442\u043e\u0440\u0441\u043a\u043e\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0443\u043b\u0443\u0447\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u0438\u043b\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 \u0432 \u0432\u0430\u0448\u0435\u0439 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u0435.\n\n\u041a\u0430\u043a \u0432\u044b \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442\u0435 \u043a \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u0438\u0434\u0435\u0439 \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u043e\u0432\u043e\u0439 \u043a\u0430\u043c\u043f\u0430\u043d\u0438\u0438?\n\n\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442 \u0438\u043b\u0438 \u0437\u0430\u0434\u0430\u0447\u0443, \u0433\u0434\u0435 \u0432\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0438 \u0437\u0430 \u0440\u0430\u043c\u043a\u0430\u043c\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440 \u0438\u043b\u0438 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043e\u0432.\n\n\u041c\u043e\u0436\u0435\u0442\u0435 \u043b\u0438 \u0432\u044b \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u043e\u0433\u0434\u0430 \u0432\u0430\u0448\u0438 \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0438\u0434\u0435\u0438 \u0431\u044b\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u044b?\"\"\"\n\nuser_QG = \"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0439 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432, \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 HR \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430 \u043c\u043e\u0433 \u0431\u044b \u0431\u044b\u043b\u043e \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u0443 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0430\u0441\u043f\u0435\u043a\u0442: {i}\"\n\nquestions = []\n\nfor i in HR_requests:\n\n    # \u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0443 , \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0438\u0437 HR_requests \u0432\u043c\u0435\u0441\u0442\u043e {i}\n\n    user_prompt_questions = user_QG.format(i=i)\n\n\n\n    # \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e simple_gpt_answer \u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439 user_prompt_writer_modified\n\n    ans = simple_gpt_answer(system_QG, user_assist_QG, assist_QG, user_prompt_questions, temp=0, model='gpt-3.5-turbo-1106')\n\n\n\n    # \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a prompts\n\n    questions.append(ans)\nquestions", "metadata": {"subid": 0, "total": 4, "source": "https://colab.research.google.com/drive/1X8R5z3Y3muHlY2gfjhBtHBaBZOcnNfQg?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n# \u041d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u043c\u043f\u0442\u043e\u0432 \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0430\u0441\u043f\u0435\u043a\u0442\u0430\u043c \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f\n\u041e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044f\u0441\u044c \u043d\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u0430\u0445 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f, \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 HR_requests, \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u043e\u043c\u043f\u0442\u044b \u0432 user \u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443 \u0438\u0437 HR_requests.\nsystem_prompt_writer = \"\"\"\u0422\u044b-\u043a\u043e\u043f\u0438\u0440\u0430\u0439\u0442\u0435\u0440, \u043d\u0430 100% \u0442\u043e\u0447\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0438\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438. \u0412 \u0438\u0442\u043e\u0433\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c\u0441\u044f \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0440\u043e\u043a: \u0432 \u043f\u0435\u0440\u0432\u043e\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 - \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044e \u0434\u0432\u0443\u0445 \u043e\u0442\u0447\u0435\u0442\u043e\u0432,\n\n \u0432\u043e \u0432\u0442\u043e\u0440\u043e\u043c - \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432. \u0414\u0432\u0430 \u043e\u0442\u0447\u0435\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435: \u043f\u0435\u0440\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 - \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0438 \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437, \u0432\u0442\u043e\u0440\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 - \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439, \u0441 \u0446\u0438\u0442\u0430\u0442\u0430\u043c\u0438\"\"\"\n\nuser_assist = \"\"\"\u044f \u0433\u043e\u0442\u043e\u0432\u043b\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043f\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0443 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043f\u0443\u043d\u043a\u0442\u0430\u043c. \u0422\u0435\u0431\u0435 \u043d\u0443\u0436\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e\n\n\u0430\u0441\u043f\u0435\u043a\u0442\u0430:  \u0430\u043d\u0430\u043b\u0438\u0437 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0438\u0434\u0435\u0438, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0442\u044c \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0434\u043b\u044f \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u0439. \u0412 \u0438\u0442\u043e\u0433\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 2 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432: \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\n\n\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0432 \u0434\u0438\u0430\u043b\u043e\u0433\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0431\u044b \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u0444\u0440\u0430\u0437\u044b \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e \u0442\u0435\u043c\u0435: \u0430\u043d\u0430\u043b\u0438\u0437 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0438\u0434\u0435\u0438, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0442\u044c \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435\n\n\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0434\u043b\u044f \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u0439. \u0412\u0430\u0436\u043d\u043e: \u0441\u0434\u0435\u043b\u0430\u0439 \u0432\u0441\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435: \u0441\u043f\u0438\u0441\u043e\u043a \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439 (2 \u043e\u0442\u0447\u0435\u0442\u0430), \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430. \u041f\u0435\u0440\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043a\u0438\u043c \u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443, \u0432 2-3\n\n\u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u0445, \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 - \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439, \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437, \u0441 \u0446\u0438\u0442\u0430\u0442\u0430\u043c\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430.\"\"\"\n\n\n\nassistant = \"\"\"['\u041d\u0430\u043f\u0438\u0448\u0438 2 \u043e\u0442\u0447\u0435\u0442\u0430: \u041f\u0435\u0440\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442: \u043a\u0440\u0430\u0442\u043a\u043e \u0438 \u043a\u043e\u043d\u0446\u0435\u043d\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e, \u0432 \u043f\u0430\u0440\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u043e\u0446\u0435\u043d\u0438, \u043d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442 \u0441\u043f\u043e\u0441\u043e\u0431\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u044b\u043c \u0438 \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u0432 \u0441\u0432\u043e\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u0435.\n\n\u0412\u0442\u043e\u0440\u043e\u0439 \u043e\u0442\u0447\u0435\u0442: \u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0438\u0434\u0435\u0438, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0442\u044c \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0438 \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0434\u043b\u044f \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u0439. \u041e\u0446\u0435\u043d\u043a\u0430 \u0443\u0440\u043e\u0432\u043d\u044f \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0438\n\n\u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043a \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0430\u043c, \u0438 \u043f\u043e\u0447\u0435\u043c\u0443 \u0442\u044b \u0441\u0434\u0435\u043b\u0430\u043b \u0442\u0430\u043a\u043e\u0439 \u0432\u044b\u0432\u043e\u0434. \u041a\u0430\u043a\u0438\u0435 \u0444\u0440\u0430\u0437\u044b \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u0432 \u0434\u0438\u0430\u043b\u043e\u0433\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c\u0438 \u0434\u043b\u044f \u043e\u0446\u0435\u043d\u043a\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0430\u0441\u043f\u0435\u043a\u0442\u0430? \u041f\u0440\u043e\u0446\u0438\u0442\u0438\u0440\u0443\u0439 \u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0440\u0430\u0437\u044b.\n\n\u0412 \u0441\u0432\u043e\u0438\u0445 \u0432\u044b\u0432\u043e\u0434\u0430\u0445 \u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u0439\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0430\u0445 \u0434\u0438\u0430\u043b\u043e\u0433\u0430, \u043d\u0435 \u043f\u0440\u0438\u0434\u0443\u043c\u044b\u0432\u0430\u0439 \u043d\u0438\u0447\u0435\u0433\u043e \u043e\u0442 \u0441\u0435\u0431\u044f.',\n\n'\u041a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c, \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u0438, \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434, \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0438\u0434\u0435\u0439, \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u044f, \u043c\u044b\u0448\u043b\u0435\u043d\u0438\u0435 \"\u0437\u0430 \u0440\u0430\u043c\u043a\u0430\u043c\u0438\", \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043f\u0440\u043e\u0440\u044b\u0432\u043d\u044b\u0435 \u0438\u0434\u0435\u0438, \u043f\u0440\u043e\u0440\u044b\u0432\u043d\u043e\u0435 \u043c\u044b\u0448\u043b\u0435\u043d\u0438\u0435, \u0442\u0432\u043e\u0440\u0447\u0435\u0441\u043a\u0438\u0439 \u043f\u043e\u0434\u0445\u043e\u0434,\n\n\u043e\u0442\u043a\u0440\u044b\u0442\u043e\u0441\u0442\u044c \u0434\u043b\u044f \u043d\u043e\u0432\u043e\u0433\u043e']\"\"\"\n\n\n\nuser = \"\"\"\u044f \u0433\u043e\u0442\u043e\u0432\u043b\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043f\u043e \u0430\u043d\u0430\u043b\u0438\u0437\u0443 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430 \u043f\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u043f\u0443\u043d\u043a\u0442\u0430\u043c. \u0422\u0435\u0431\u0435 \u043d\u0443\u0436\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e\n\n\u0430\u0441\u043f\u0435\u043a\u0442\u0430:  {i}. \u0412 \u0438\u0442\u043e\u0433\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 2 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432: \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0432 \u0434\u0438\u0430\u043b\u043e\u0433\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0431\u044b \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u0444\u0440\u0430\u0437\u044b \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e \u0442\u0435\u043c\u0435: {i}\n\n\u0412\u0430\u0436\u043d\u043e: \u0441\u0434\u0435\u043b\u0430\u0439 \u0432\u0441\u0435 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435: \u0441\u043f\u0438\u0441\u043e\u043a \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439 (2 \u043e\u0442\u0447\u0435\u0442\u0430), \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430. \u041f\u0435\u0440\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043a\u0440\u0430\u0442\u043a\u0438\u043c \u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443, \u0432 2-3\n\n\u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u0445, \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 - \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0439, \u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044b\u0439 \u0430\u043d\u0430\u043b\u0438\u0437, \u0441 \u0446\u0438\u0442\u0430\u0442\u0430\u043c\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430.\"\"\"\n\n\n\nprompts = []\n\nfor i in HR_requests:\n\n    # \u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u0442\u0440\u043e\u043a\u0443 user_prompt_writer, \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0438\u0437 HR_requests \u0432\u043c\u0435\u0441\u0442\u043e {i}\n\n    user_prompt_writer_modified = user.format(i=i)\n\n\n\n    # \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e simple_gpt_answer \u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u043e\u0439 user_prompt_writer_modified\n\n    ans = simple_gpt_answer(system_prompt_writer, user_assist, assistant, user_prompt_writer_modified, temp=0, model='gpt-3.5-turbo-1106')\n\n\n\n    # \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a prompts\n\n    prompts.append(ans)\n\nprompts\nimport ast\n\n# \u0417\u0430\u043c\u0435\u043d\u0430 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u0432 \u0441\u0442\u0440\u043e\u043a \u043d\u0430 \u043f\u0440\u043e\u0431\u0435\u043b\u044b\n\nmodified_list = [item.replace('\\n', ' ') for item in prompts]\n\n\n\n# \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a\n\nconverted_list = [ast.literal_eval(item) for item in modified_list]\n\n\n\nprint(converted_list)\n# \u0442\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0431\u0443\u0434\u0435\u043c \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 - \u043a \u043f\u0440\u043e\u043c\u043f\u0442\u0430\u043c \u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c\n\nconverted_list[0][1]\nconverted_list[0][0]\n\n##\u0414\u0438\u0430\u043b\u043e\u0433\n#@title \u041f\u043e\u0434\u0441\u0447\u0435\u0442 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0438 \u0438\u0445 \u0441\u043e\u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u0432 \u0434\u0438\u0430\u043b\u043e\u0433\u0435 \u043c\u0435\u0436\u0434\u0443 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c \u0438 \u043c\u0435\u043d\u0434\u0436\u0435\u0440\u043e\u043c\n\nnum_token_dialog = num_tokens_from_string(dialogue, encoding_name=\"cl100k_base\")\n\nnum_token_applicant = num_tokens_from_string(applicant_part, encoding_name=\"cl100k_base\")\n\nnum_token_HR = num_tokens_from_string(hr_part, encoding_name=\"cl100k_base\")\n\nprint('\u0422\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0414\u0438\u0430\u043b\u043e\u0433: ', num_token_dialog)\n\nprint('\u0422\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +: ', num_token_applicant)\n\nprint('\u0422\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 HR +: ', num_token_HR)\n\n\n\n# \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u043d\u0443\u043b\u0435\u0432\u043e\u0435 \u043e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0434\u0438\u0430\u043b\u043e\u0433\u0435 \u0434\u043b\u044f \u0438\u0437\u0431\u0435\u0436\u0430\u043d\u0438\u044f \u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043d\u043e\u043b\u044c\n\nif num_token_dialog > 0:\n\n    percent_applicant = (num_token_applicant * 100) / num_token_dialog\n\n    percent_HR = (num_token_HR * 100) / num_token_dialog\n\n    print(\"\u041f\u0440\u043e\u0446\u0435\u043d\u0442 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c: \", round(percent_applicant, 2), '%')\n\n    print(\"\u041f\u0440\u043e\u0446\u0435\u043d\u0442 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 HR: \", round(percent_HR, 2), '%')\n\nelse:\n\n    print(\"\u0414\u0438\u0430\u043b\u043e\u0433 \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0442\u043e\u043a\u0435\u043d\u043e\u0432.\")", "metadata": {"subid": 1, "total": 4, "source": "https://colab.research.google.com/drive/1X8R5z3Y3muHlY2gfjhBtHBaBZOcnNfQg?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n**content** - *\u044d\u0442\u043e \u0432\u044b\u0431\u043e\u0440 \u0438\u0437 \u043a\u0430\u043a\u043e\u0439 \u0431\u0430\u0437\u044b \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430*\n\n\n\n**temperature** - *\u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0447\u0435\u043c \u043c\u0435\u043d\u044c\u0448\u0435 (\u0431\u043b\u0438\u0436\u0435, \u043b\u0438\u0431\u043e \u0440\u0430\u0432\u043d\u043e \u043d\u0443\u043b\u044e) \u0447\u0435\u043c \u0442\u043e\u0447\u043d\u0435\u0435 \u043a \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0443, \u0447\u0435\u043c \u0431\u043b\u0438\u0436\u0435 \u043a 1 \u0442\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0444\u0430\u043d\u0442\u0430\u0437\u0438\u0438*\n\n\n\n**num_fragment** - *\u044d\u0442\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0440\u0435\u0437\u043a\u043e\u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0442\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0444\u0440\u0430\u0437\u0430\u043c \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u044e\u0442\u0441\u044f \u0432 \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 (\u0441\u0435\u0439\u0447\u0430\u0441 5 \u0442\u0430\u043a \u043a\u0430\u043a \u043f\u0440\u0438 \u043d\u044b\u043d\u0435\u0448\u043d\u0435\u0439 \u043d\u0430\u0440\u0435\u0437\u043a\u0435 \u0432\u043b\u0435\u0437\u0430\u0435\u0442 \u0432 \u043c\u043e\u0434\u0435\u043b\u044c \u043f\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0443 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u043e\u043a\u043e\u043b\u043e 3000, \u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0440\u044c\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f)*\n\n\n\n**system_prompt** - \u044d\u0442\u043e \u0440\u043e\u043b\u044c \u043c\u043e\u0434\u0435\u043b\u0438 \u0438 \u043a\u0430\u043a\u0438\u0435 \u0442\u043e \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438\n\n\n\n**instructions** - *\u044d\u0442\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0430\u0434 \u043e\u0442\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u043c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043e\u043c \u043f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0444\u0440\u0430\u0437\u0430\u043c*\n\n\n\n**topicphrase** - *\u044d\u0442\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0434\u043b\u044f \u043e\u0442\u0431\u043e\u0440\u0430 \u043e\u0442\u0440\u044b\u0432\u043a\u043e\u0432 \u0442\u0435\u043a\u0441\u0442\u0430 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u0441\u043c\u044b\u0441\u043b\u0435 \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430*\n# \u0414\u0435\u0442\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0447\u0435\u0442\u044b \u043f\u043e \u043f\u0443\u043d\u043a\u0442\u0430\u043c:\n\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\n#@title 1.\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435, \u043a \u043a\u0430\u043a\u043e\u0439 \u0438\u0437 \u0440\u043e\u043b\u0435\u0439 \u0410\u0434\u0438\u0437\u0435\u0441\u0430 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 816 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\nnum_fragment = 8 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[0][0]\n\ntopicphrase = converted_list[0][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\noutput1 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model)\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output1)\n#@title 2.\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0441\u0442\u044c vs \u0421\u0443\u0435\u0442\u043e\u043b\u043e\u0433\u0438\u044f\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 688 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 8 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[1][0]\n\ntopicphrase = converted_list[1][1]\n\n\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput2 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output2)\n#@title 3. \u041e\u0440\u0438\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043d\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0438\u043b\u0438 \u043d\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 712 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 7 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[2][0]\n\ntopicphrase = converted_list[2][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput3 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output3)\n#@title 4. \u0421\u043a\u043b\u043e\u043d\u043d\u043e\u0441\u0442\u044c \u043a \u0438\u043d\u0438\u0446\u0438\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u043a \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u044e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 800 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 9 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[3][0]\n\ntopicphrase = converted_list[3][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput4 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output4)\n#@title 5. \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u0410\u043c\u0431\u0438\u0446\u0438\u0439 \u0438 \u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u0421\u043b\u043e\u0436\u043d\u044b\u0435 \u0417\u0430\u0434\u0430\u0447\u0438\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 1024 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 9 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[4][0]\n\ntopicphrase = converted_list[4][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput5 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output5)\n#@title 6. \u0421\u0442\u0440\u0435\u0441\u0441\u043e\u0443\u0441\u0442\u043e\u0439\u0447\u0438\u0432\u043e\u0441\u0442\u044c \u0438 \u0430\u0434\u0430\u043f\u0442\u0430\u0446\u0438\u044f \u043a \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 1024 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 7 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[5][0]\n\ntopicphrase = converted_list[5][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput6 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output6)\n#@title 7. \u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0438 \u041f\u0440\u0438\u0437\u043d\u0430\u043d\u0438\u0435 \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 912 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 6 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[6][0]\n\ntopicphrase = converted_list[6][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput7 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output7)\n#@title 8. \u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u044b \u0438 \u0426\u0435\u043d\u043d\u043e\u0441\u0442\u043d\u044b\u0435 \u041e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u044b \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f\n\nmodel = \"gpt-3.5-turbo\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 1024 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 4 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[7][0]\n\ntopicphrase = converted_list[7][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput8 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output8)\n#@title 9. \u041a\u043e\u043c\u0430\u043d\u0434\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 1024 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 7 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[8][0]\n\ntopicphrase = converted_list[8][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput9 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output9)\n#@title 10. \u0418\u043d\u0438\u0446\u0438\u0430\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0438 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ncontent = '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +' #@param ['\u0414\u0438\u0430\u043b\u043e\u0433', '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +', 'HR +']\n\nchunk_size = 960 #@param {type: \"slider\", min: 200, max: 1024, step:8}\n\nchunk_overlap = 0 #@param {type: \"slider\", min: 0, max: 256, step:8}\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nnum_fragment = 5 #@param {type:\"integer\"}\n\nsystem_prompt = \"\u0422\u044b \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0448\u044c \u0434\u0438\u0430\u043b\u043e\u0433 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u201c\u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430\u201d, \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \\\"\u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u0431\u0435 \u043e\u0442\u0440\u0435\u0437\u043a\u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c 2 \u043e\u0442\u0447\u0435\u0442\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435\" #@param {type:\"string\"}\n\ninstructions = converted_list[9][0]\n\ntopicphrase = converted_list[9][1]\n\n\n\nif content == '\u0414\u0438\u0430\u043b\u043e\u0433':\n\n  content_base = dialogue\n\nelif content == '\u0421\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c +':\n\n  content_base = applicant_part\n\nelif content == 'HR +':\n\n  content_base = hr_part\n\n\n\noutput10 = answer_user_question(system_prompt, content_base, topicphrase,\n\n                               instructions, temperature, 0, num_fragment,\n\n                               chunk_size, chunk_overlap, model) #\u041e\u0411\u0429\u0418\u0419\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", output10)\n", "metadata": {"subid": 2, "total": 4, "source": "https://colab.research.google.com/drive/1X8R5z3Y3muHlY2gfjhBtHBaBZOcnNfQg?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n# \u041e\u0442\u0447\u0435\u0442\u044b:\n#@title \u041e\u0442\u0447\u0435\u0442 \u043e \u043d\u0430\u0432\u044b\u043a\u0430\u0445 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nsystem_prompt = \"\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u0430\u043d\u0430\u043b\u0438\u0437\u0435 \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u043c\u0435\u0436\u0434\u0443 HR \u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u0435\u043c \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430. \u041e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044f\u0441\u044c \u043d\u0430 \u044d\u0442\u043e\u043c \u0434\u0438\u0430\u043b\u043e\u0433\u0435, \u0442\u0435\u0431\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0447\u0435\u0442, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0442\u044b \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u0448\u044c \u0438 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0448\u044c \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0443\u043c\u0435\u043d\u0438\u044f \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f, \u0432\u044b\u044f\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0432 \u0445\u043e\u0434\u0435 \u0431\u0435\u0441\u0435\u0434\u044b. \u041f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0438, \u043a\u0430\u043a\u0438\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0437\u043d\u0430\u043d\u0438\u044f \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u043e\u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b, \u0438 \u043a\u0430\u043a \u044d\u0442\u0438 \u043d\u0430\u0432\u044b\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u044b \u0434\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430.\" #@param {type:\"string\"}\n\ninstructions = \"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438 \u0438 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0443\u043c\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u043e\u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0434\u0438\u0430\u043b\u043e\u0433\u0430. \u042d\u0442\u043e \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0437\u043d\u0430\u043d\u0438\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0438\u043b\u0438 \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c, \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438, \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c, \u0443\u043c\u0435\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u0435, \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438, \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u0438 \u0442.\u0434. \u041e\u0431\u044a\u044f\u0441\u043d\u0438, \u043f\u043e\u0447\u0435\u043c\u0443 \u044d\u0442\u0438 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0443\u043c\u0435\u043d\u0438\u044f \u0432\u0430\u0436\u043d\u044b \u0434\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438 \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u0430\u043a \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043a \u0430\u043d\u0430\u043b\u0438\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043c\u043e\u0447\u044c \u0432 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u043e\u0432\u044b\u0445 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0439, \u0438\u043b\u0438 \u043a\u0430\u043a \u043a\u043e\u043c\u043c\u0443\u043d\u0438\u043a\u0430\u0442\u0438\u0432\u043d\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0441\u043f\u043e\u0441\u043e\u0431\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u0435 \u0438 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e \u0441 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c\u0438. \u0421\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u0443\u0439 \u0441\u0432\u043e\u0438 \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u0435, \u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044f\u0441\u044c \u043d\u0430 \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u0415\u0441\u043b\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e, \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438 \u0432\u043e\u043f\u0440\u043e\u0441\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u043b\u0438 \u0431\u044b \u043f\u043e\u043c\u043e\u0447\u044c \u0432\u044b\u044f\u0432\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0446\u0438\u0438 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0430\u0445 \u0440\u0430\u0431\u043e\u0442\u044b, \u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0430\u0445 \u043a \u0440\u0435\u0448\u0435\u043d\u0438\u044e \u0442\u0438\u043f\u043e\u0432\u044b\u0445 \u0437\u0430\u0434\u0430\u0447 \u0432 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u0435, \u043e \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0438 \u0442\u0440\u0435\u043d\u0434\u043e\u0432 \u043e\u0442\u0440\u0430\u0441\u043b\u0438 \u0438 \u0442.\u0434.\" #@param {type:\"string\"}\n\n\n\nskills_report = answer_user_question_from_answer(system_prompt, instructions, applicant_part,\n\n                               temperature, 0, model)\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", skills_report)\n#@title \u0418\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442\n\nmodel = \"gpt-3.5-turbo-1106\" #@param [\"gpt-3.5-turbo\", \"gpt-3.5-turbo-16k\", \"gpt-3.5-turbo-1106\"]\n\ntemperature = 0 #@param {type: \"slider\", min: 0, max: 1, step:0.1}\n\nsystem_prompt = \"\u041a\u0430\u043a HR, \u0442\u044b \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u0448\u044c \u043e\u0442\u0447\u0435\u0442\u044b, \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u043c HR-\u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442\u043e\u043c, \u043f\u043e \u0438\u0442\u043e\u0433\u0430\u043c \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u0441 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u043e\u043c \u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430 \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \\\"\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442 \u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". \u0422\u0432\u043e\u044f \u0446\u0435\u043b\u044c - \u0441\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442, \u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u0443\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438\u0437 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u043e\u0442\u0447\u0435\u0442\u043e\u0432, \u0438\u0437\u0431\u0435\u0433\u0430\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 \u0438 \u0444\u043e\u043a\u0443\u0441\u0438\u0440\u0443\u044f\u0441\u044c \u043d\u0430 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0432\u0430\u0436\u043d\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u0430\u0445.\" #@param {type:\"string\"}\n\ninstructions = \"\u0421\u043e\u0441\u0442\u0430\u0432\u044c \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442, \u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u0443\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0438\u0437 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u043e\u0442\u0447\u0435\u0442\u043e\u0432, \u0438\u0437\u0431\u0435\u0433\u0430\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 \u0438 \u0444\u043e\u043a\u0443\u0441\u0438\u0440\u0443\u044f\u0441\u044c \u043d\u0430 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0432\u0430\u0436\u043d\u044b\u0445 \u0430\u0441\u043f\u0435\u043a\u0442\u0430\u0445. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043e\u0442\u0447\u0435\u0442\u0430: 1. \u0410\u043d\u0430\u043b\u0438\u0437 \u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u041e\u0442\u0447\u0435\u0442\u043e\u0432: \u0412\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0437\u0443\u0447\u0438 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043e\u0442\u0447\u0435\u0442\u044b, \u0432\u044b\u0434\u0435\u043b\u044f\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0443\u043f\u043e\u043c\u044f\u043d\u0443\u0442\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438, \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430, \u043e\u043f\u044b\u0442 \u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f.  2. \u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u041a\u043b\u044e\u0447\u0435\u0432\u043e\u0439 \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0437\u043d\u0430\u0447\u0438\u043c\u044b\u0435 \u0444\u0430\u043a\u0442\u044b \u0438 \u043d\u0430\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u044f \u043e \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u044f\u043c\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u044b \u0441 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u043c\u043e\u0449\u043d\u0438\u043a\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0430. \u042d\u0442\u043e \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0435\u0433\u043e \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438, \u043e\u043f\u044b\u0442 \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u0441\u0444\u0435\u0440\u0435 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u0430, \u043a\u0440\u0435\u0430\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c, \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438, \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c \u043a \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u0435 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u044b\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430. 3. \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u041e\u0442\u0447\u0435\u0442\u0430: \u0421\u043e\u0441\u0442\u0430\u0432\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043e\u0442\u0447\u0435\u0442\u0430, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0443\u0442 \u0447\u0435\u0442\u043a\u043e \u0440\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u044b \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0438 \u043b\u0438\u0447\u043d\u043e\u0441\u0442\u043d\u044b\u0445 \u043a\u0430\u0447\u0435\u0441\u0442\u0432 \u0441\u043e\u0438\u0441\u043a\u0430\u0442\u0435\u043b\u044f. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0440\u0430\u0437\u0434\u0435\u043b\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043d\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u044b: \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u043a\u0432\u0430\u043b\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f, \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u043f\u044b\u0442, \u043b\u0438\u0447\u043d\u044b\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \u0438 \u043d\u0430\u0432\u044b\u043a\u0438. 4. \u0424\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u043e\u0432\u043a\u0430 \u0412\u044b\u0432\u043e\u0434\u043e\u0432: \u041d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0441\u0444\u043e\u0440\u043c\u0443\u043b\u0438\u0440\u0443\u0439 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0438 \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0430 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438. \u0423\u043a\u0430\u0436\u0438, \u043a\u0430\u043a\u0438\u0435 \u0435\u0433\u043e \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430 \u0438 \u043d\u0430\u0432\u044b\u043a\u0438 \u0434\u0435\u043b\u0430\u044e\u0442 \u0435\u0433\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u043c (\u0438\u043b\u0438 \u043d\u0435\u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u043c) \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \\\"\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430\\\". 5. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438: \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e, \u0434\u0430\u0439 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438 \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0445 \u0448\u0430\u0433\u043e\u0432 - \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043a\u0430\u043d\u0434\u0438\u0434\u0430\u0442\u0443 \u0432\u0442\u043e\u0440\u043e\u0435 \u0441\u043e\u0431\u0435\u0441\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0441 \u0443\u0447\u0430\u0441\u0442\u0438\u0435\u043c \u0434\u0440\u0443\u0433\u0438\u0445 \u0447\u043b\u0435\u043d\u043e\u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u0438\u043b\u0438 \u043f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e \u0440\u0430\u0431\u043e\u0442. 6. \u0418\u0442\u043e\u0433\u043e\u0432\u043e\u0435 \u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435: \u0423\u0431\u0435\u0434\u0438\u0441\u044c, \u0447\u0442\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 \u043b\u0430\u043a\u043e\u043d\u0438\u0447\u0435\u043d, \u0447\u0435\u0442\u043a\u043e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0438 \u0441\u0432\u043e\u0431\u043e\u0434\u0435\u043d \u043e\u0442 \u043d\u0435\u043d\u0443\u0436\u043d\u044b\u0445 \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0439. \u041e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u044f\u0441\u043d\u044b\u043c \u0438 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u043c \u044f\u0437\u044b\u043a\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u043c\u043e\u0433\u043b\u0438 \u043b\u0435\u0433\u043a\u043e \u043f\u043e\u043d\u044f\u0442\u044c \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0447\u043b\u0435\u043d\u044b \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438\u043b\u0438 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438.\" #@param {type:\"string\"}\n\n\n\n\n\nanswers = \" \".join([f\"\u0410\u043d\u0430\u043b\u0438\u0437 \u2116{i+1}. {q}\\n\"  for i, q in enumerate([output1, output2, output3, output4, output5, output6, output7, output8, output9, output10, skills_report]) if len(q)])\n\n\n\nfinal_report = answer_user_question_from_answer(system_prompt, instructions, answers,\n\n                               temperature, 0, model)\n\n\n\nprint(\"\\n\u041e\u0442\u0432\u0435\u0442:\\n\", final_report)", "metadata": {"subid": 3, "total": 4, "source": "https://colab.research.google.com/drive/1X8R5z3Y3muHlY2gfjhBtHBaBZOcnNfQg?usp=sharing"}}}]