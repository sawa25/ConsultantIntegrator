[{"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n\n# \u041d\u0435\u0439\u0440\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043c\u0435\u0439\u043a\u0435\u0440\n## **\u041f\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0437\u0430\u0434\u0430\u0447\u0438:**\n\n\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u0435\u0439\u0440\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043c\u0435\u0439\u043a\u0435\u0440\u0430 \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u0442\u0435\u043c, \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u043f\u043b\u0430\u043d\u0430 \u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u0441\u0442\u0438\u043b\u0435.\n\n\n\n**\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a**:\n\n\u0411\u0430\u0437\u0430 \u0437\u043d\u0430\u043d\u0438\u0439 \u043e\u0442 \u041d\u0435\u0439\u0440\u043e-\u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0447\u0430\u0442\u0430 \u0423\u0418\u0418, \u043f\u043e\u0441\u0442\u044b \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430.\n\n\n\n**\u0426\u0435\u043b\u044c \u043f\u0440\u043e\u0435\u043a\u0442\u0430**:\n\n*   \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u043f\u043b\u0430\u043d\u0430 \u043d\u0430 7 \u043f\u043e\u0441\u0442\u043e\u0432 (7 \u0434\u043d\u0435\u0439 \u043d\u0435\u0434\u0435\u043b\u0438) (4 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438)\n\n*   \u041f\u043e\u0441\u0442\u044b \u043f\u043e \u0442\u0435\u043c\u0435 \u043d\u0443\u0436\u043d\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0432 \u0441\u0442\u0438\u043b\u0435 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430\n\n\n\n**\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438**:\n\n\n\n*   *\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430*:\n\n\u0432\u044b\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u0442\u0438\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430.\n\n\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u043f\u043b\u0430\u043d\u0430\n\n\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f 7 \u043f\u043e\u0441\u0442\u043e\u0432 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u0435\u043c\u044b \u043d\u0435\u0434\u0435\u043b\u0438, \u0442\u0435\u043c\u044b \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430, \u043a\u0443\u0440\u0441\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0434\u0430\u0435\u043c \u0438 \u0430\u043a\u0446\u0438\u0438 \u043d\u0435\u0434\u0435\u043b\u0438\n\n*   *\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438*:\n\n - \u043e\u0446\u0435\u043d\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u043c \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0441\u0442\u0438\u043b\u044f\n\n - \u043e\u0446\u0435\u043d\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u043c \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u043f\u043b\u0430\u043d\u0430\n\n - \u043e\u0446\u0435\u043d\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u043e\u043c \u043f\u043e\u0441\u0442\u043e\u0432\n\n\n\n**\u041e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b**:\n\n\u041d\u0435\u0439\u0440\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442 \u043c\u0435\u0439\u043a\u0435\u0440, \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u043f\u043b\u0430\u043d \u0438 \u043f\u043e\u0441\u0442\u044b \u043f\u043e \u0442\u0435\u043c\u0435 \u043d\u0443\u0436\u043d\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0432 \u0441\u0442\u0438\u043b\u0435 \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430.\n\n##**\u042d\u0442\u0430\u043f\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:**\n\n\u0420\u0430\u0437\u0431\u0438\u043b\u0438 \u0422\u0413-\u043f\u043e\u0441\u0442\u044b \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c:\n\n1.   \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 (~ 200 \u0441\u043b\u043e\u0432)\n\n2.   \u043f\u0440\u043e\u0433\u0440\u0435\u0432 \u043f\u0435\u0440\u0435\u0434 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u043e\u043c (~ 200 \u0441\u043b\u043e\u0432)\n\n3.   \u043f\u0440\u043e\u0434\u0430\u0436\u0430, (~ 500 \u0441\u043b\u043e\u0432)\n\n4.   \u043f\u0440\u043e\u0433\u0440\u0435\u0432 \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430 (~ 200-300 \u0441\u043b\u043e\u0432).\n\n\n\n\u0418\u0437 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c.\u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430 (https://docs.google.com/document/d/13GW8Q2QlCFL0s4WWaKkl9zWKczSlgXeZweveNfHh150\n\n):\n\n1. \u0412\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u0442\u0438\u043b\u044f \u0414\u043c\u0438\u0442\u0440\u0438\u044f (\u043c\u043e\u0434\u0435\u043b\u044c GPT).\n\n2. \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043b\u0438 \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u0441\u043b\u043e\u0432 (\u0444\u0443\u043d\u043a\u0446\u0438\u044f python).\n\n\n\n\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e GPT \u043f\u043e\u0441\u0442\u044b \u043d\u0430 \u0442\u0435\u043c\u044b \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c.\u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430.\n\n\u0421\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 python (\u0442\u043e\u043a\u0435\u043d\u0430\u0439\u0437\u0435\u0440\u043e\u043c) \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0438\u0437 \u043f\u043e\u0441\u0442\u043e\u0432 GPT \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u0432.  \n\nC\u0440\u0430\u0432\u043d\u0438\u043b\u0438 \u044d\u0442\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0441\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0432 \u0441\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u0430\u0445 \u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0438 \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432 (\u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 GPT, \u043d\u043e \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0420\u043e\u043c\u0430\u043d\u043e\u0432).   \n\n\u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u043d\u0435 \u043c\u0435\u043d\u044f\u043b\u0438 \u0447\u0430\u0441\u0442\u043e\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e \u0434\u0440\u0443\u0433\u0438\u043c \u0441\u043b\u043e\u0432\u0430\u043c.  \n\n\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u043b\u0438 \u0437\u0430\u043f\u0440\u0435\u0442 \u043d\u0430 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432 \u0432 \u043f\u0440\u043e\u043c\u043f\u0442\u0435. \u041d\u043e \u044d\u0442\u043e \u043d\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u0445\u043e\u0440\u043e\u0448\u043e \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0433\u043d\u0430\u0442\u044c \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442 \u0447\u0435\u0440\u0435\u0437 \u043c\u043e\u0434\u0435\u043b\u044c-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443\u0441\u0442\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u0442\u0438\u043b\u0438\u0441\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u0435\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u0438 \u043d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f \u0441\u043e \u0441\u0442\u0438\u043b\u0435\u043c \u0431\u043b\u043e\u0433\u0435\u0440\u0430.\n\n\n\n\u0421\u043e\u0437\u0434\u0430\u043b\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043c\u043f\u0442\u044b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0437\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0438\u0437 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f.\n\n## \u0413\u043e\u0442\u043e\u0432\u0438\u043c \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0435\n\n\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0430\u043a\u0435\u0442\u044b.\n\n\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438.\n\n\u0417\u0430\u0434\u0430\u0435\u043c \u043a\u043b\u044e\u0447 API (openAI).\n\n\u0417\u0430\u0434\u0430\u0435\u043c \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b.\n#@title \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0430\u043a\u0435\u0442\u044b\n\n!pip  install fastapi kaleido python-multipart uvicorn cohere langchain==0.0.335 openai==1.2.3 tiktoken==0.5.1 pydantic==1.10.8 faiss-cpu==1.7.4 nltk oauth2client >/dev/null\n\n!pip install gspread >/dev/null\n\n!pip install pymorphy2 tensorflow >/dev/null\n\n#@title \u0418\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438\n\nimport os\n\nimport re\n\nimport time\n\nimport json\n\nimport gdown\n\nimport getpass\n\nimport requests\n\nimport pathlib\n\nimport tempfile\n\nimport subprocess\n\nimport keras\n\n\n\nimport openai\n\nfrom openai import OpenAI\n\nimport tiktoken\n\n\n\nfrom langchain.docstore.document import Document\n\nfrom langchain.vectorstores import FAISS\n\nfrom langchain.embeddings.openai import OpenAIEmbeddings\n\nfrom tqdm.auto import tqdm\n\nfrom IPython.display import clear_output\n\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\n\nfrom keras.preprocessing.text import Tokenizer\n\nimport pymorphy2\n#@title \u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c \u043a\u043b\u044e\u0447 API \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0435\u0433\u043e \u043a\u0430\u043a \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f\n\nopenai_key = getpass.getpass(\"OpenAI API Key:\")\n\nos.environ[\"OPENAI_API_KEY\"] = openai_key\n\nopenai.api_key = openai_key\n#@title \u0417\u0430\u0434\u0430\u0435\u043c \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b\n\ngpt_35_turbo = 'gpt-3.5-turbo-1106'\n\ngpt_4_turbo = 'gpt-4-1106-preview'\n\nMODEL = gpt_4_turbo\n\ntemp = 0.1\n\nmax_tok = 2000\n\npost_Dm = 'https://docs.google.com/document/d/13GW8Q2QlCFL0s4WWaKkl9zWKczSlgXeZweveNfHh150' # \u0437\u0434\u0435\u0441\u044c 134 \u043f\u043e\u0441\u0442\u0430 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0441 \u043c\u0430\u044f \u0440\u0430\u0437\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435", "metadata": {"subid": 0, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n## \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u0424\u0443\u043d\u043a\u0446\u0438\u0438\n# \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u043f\u043e\u0434\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0432 \u0432 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043c \u0442\u0435\u043a\u0441\u0442\u0435 text:\n\ndef count_words(text):\n\n    words = text.split()\n\n    return len(words)\n\n\n\n# \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442 plane text \u0438\u0437 \u0413\u0443\u0433\u043b\u0414\u043e\u043a\u0430 \u043f\u043e URL-\u0441\u0441\u044b\u043b\u043a\u0435 (url). \u0413\u0443\u0433\u043b\u0414\u043e\u043a \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u0440\u044b\u0442 \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u043c, \u0443 \u043a\u043e\u0433\u043e \u0435\u0441\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430\n\ndef load_googledoc_by_url(url: str) -> str:\n\n        match_ = re.search('/document/d/([a-zA-Z0-9-_]+)', url)\n\n        if match_ is None:\n\n            raise ValueError('Invalid Google Docs URL')\n\n        doc_id = match_.group(1)\n\n        response = requests.get(f'https://docs.google.com/document/d/{doc_id}/export?format=txt')\n\n        response.raise_for_status()\n\n        return response.text\n\n\n\n# \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u0442 num_chunks \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0441\u043f\u0438\u0441\u043a\u0430 lst \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u0435\u043d\u043d\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432\n\ndef create_block_post(lst, num_chunks):\n\n    block_list = []\n\n    for i in range(0, len(lst), num_chunks):\n\n        block_list.append(' '.join(lst[i:i+num_chunks]))\n\n    return block_list\n\n\n\n# \u0424\u0443\u043d\u043a\u0446\u0438\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443\n\ndef remove_newlines(text):\n\n    cleaned_string = text.replace('\\n', ' ')\n\n    return cleaned_string\n\n\n\n#\u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0447\u0442\u0435\u043d\u0438\u044f\n\n# \u0437\u0434\u0435\u0441\u044c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 text \u043f\u043e\u0434\u0430\u0435\u0442\u0441\u044f \u0442\u0435\u043a\u0441\u0442 \u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u0432 \u0441\u0442\u0440\u043e\u043a\u0438\n\n# \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u0438\u0442 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u0440\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 max_len \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432\n\ndef insert_newlines(text: str, max_len: int = 160) -> str:\n\n      words = text.split()\n\n      lines = []\n\n      current_line = \"\"\n\n      for word in words:\n\n          if len(current_line + \" \" + word) > max_len:\n\n              lines.append(current_line)\n\n              current_line = \"\"\n\n          current_line += f' {word}'\n\n      lines.append(current_line)\n\n      return \"\\n\".join(lines)\n\n\n\n#\u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0447\u0442\u0435\u043d\u0438\u044f\n\n# \u0437\u0434\u0435\u0441\u044c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 text \u043f\u043e\u0434\u0430\u0435\u0442\u0441\u044f \u0442\u0435\u043a\u0441\u0442, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u044b \u0441\u0442\u0440\u043e\u043a\u0438\n\n# \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u0438\u0442 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u0440\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0438 max_len \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432\n\ndef insert_newlines_n(text: str, max_len: int = 150) -> str:\n\n    lines = text.splitlines()\n\n    new_lines = []\n\n    for line in lines:\n\n        words = line.split()\n\n        current_line = \"\"\n\n        for word in words:\n\n            if len(current_line + \" \" + word) > max_len:\n\n                new_lines.append(current_line)\n\n                current_line = \"\"\n\n            current_line += f' {word}'\n\n        new_lines.append(current_line)\n\n    return \"\\n\".join(new_lines)\n\n\n\n# \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u043b\u0435\u043c\u043c \u043f\u043e \u044d\u0442\u0438\u043c \u0441\u043b\u043e\u0432\u0430\u043c\n\n#  \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0444\u043e\u0440\u043c\u044b \u0441\u043b\u043e\u0432\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"\u0438\u0434\u0435\u0442\", \"\u0448\u0435\u043b\", \"\u043f\u043e\u0439\u0434\u0435\u0442\") \u043e\u0434\u043d\u0438\u043c \u0438 \u0442\u0435\u043c \u0436\u0435 \u0441\u043b\u043e\u0432\u043e\u043c \u0432 \u0435\u0433\u043e \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u0435 \u2013 \u043b\u0435\u043c\u043c\u0435 (\"\u0438\u0434\u0442\u0438\")\n\ndef get_lemmas(words):\n\n    morph = pymorphy2.MorphAnalyzer()\n\n    lemmas = []\n\n    for word in words:\n\n        parsed_word = morph.parse(word)[0]\n\n        lemmas.append(parsed_word.normal_form)\n\n    return lemmas\n\n\n\n# \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043f\u043e\u0434\u0441\u0447\u0435\u0442\u0430 \u0442\u043e\u043a\u0435\u043d\u043e\u0432\n\ndef num_tokens_from_messages(messages, model):\n\n      \"\"\"Returns the number of tokens used by a list of messages.\"\"\"\n\n      try:\n\n          encoding = tiktoken.encoding_for_model(model)\n\n      except KeyError:\n\n          encoding = tiktoken.get_encoding(\"cl100k_base\")\n\n      # if self.model == \"gpt-3.5-turbo-0301\":  # note: future models may deviate from this\n\n      if model in [\"gpt-3.5-turbo-0613\", \"gpt-3.5-turbo-16k\", \"gpt-4-0613\"]:  # note: future models may deviate from this\n\n          num_tokens = 0\n\n          for message in messages:\n\n              num_tokens += 4  # every message follows <im_start>{role/name}\\n{content}<im_end>\\n\n\n              for key, value in message.items():\n\n                  num_tokens += len(encoding.encode(value))\n\n                  if key == \"name\":  # if there's a name, the role is omitted\n\n                      num_tokens += -1  # role is always required and always 1 token\n\n          num_tokens += 2  # every reply is primed with <im_start>assistant\n\n          return num_tokens\n\n      else:\n\n          raise NotImplementedError(f\"\"\"num_tokens_from_messages() is not presently implemented for model {model}.\n\n          See https://github.com/openai/openai-python/blob/main/chatml.md for information on how messages are converted to tokens.\"\"\")\n\n\n\n# \u041f\u043e\u0434\u0441\u0447\u0435\u0442 \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435\n\ndef num_tokens_from_string(string: str, encoding_name: str) -> int:\n\n    \"\"\"Returns the number of tokens in a text string.\"\"\"\n\n    encoding = tiktoken.get_encoding(encoding_name)\n\n    num_tokens = len(encoding.encode(string))\n\n    return num_tokens\n\n\n\n# \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432 \u0411\u0417\n\ndef create_search_index(file_text,\n\n                        knowledge_base_link,\n\n                        chunk_size=1024,\n\n                        chunk_overlap=200):\n\n\n\n    splitter = RecursiveCharacterTextSplitter(['\\n\\n', '\\n', ' '], chunk_size=chunk_size, chunk_overlap=chunk_overlap)\n\n    count_tokens = 0\n\n    source_chunks = []\n\n\n\n    # \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u043c \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0447\u0430\u0441\u0442\u0435\u0439 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u0435\u0442\u043e\u0434\u0430 split_text\n\n    for chunkID,chunk in enumerate(splitter.split_text(file_text)):\n\n        source_chunks.append(Document(page_content=chunk, \\\n\n                            metadata={'source': knowledge_base_link,\n\n                                      'chunkID': chunkID}))\n\n\n\n    if len(source_chunks) > 0:\n\n        db = FAISS.from_documents(source_chunks, OpenAIEmbeddings())\n\n        count_token = num_tokens_from_string(' '.join([x.page_content for x in source_chunks]), \"cl100k_base\")\n\n        count_tokens += count_token\n\n        print('\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435 :', count_token)\n\n        # print('\u0426\u0415\u041d\u0410 \u0437\u0430\u043f\u0440\u043e\u0441\u0430:', 0.0004 * (count_token / 1000), ' $')\n\n\n\n    print('\\n\u0426\u0415\u041d\u0410 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0431\u0430\u0437\u044b \u0438\u043d\u0434\u0435\u043a\u0441\u043e\u0432:', 0.0004 * (count_tokens / 1000), ' $')\n\n    return db\n\n\n\n\n\ndef answer_index(system, instructions, tema_posta, search_index, k):\n\n    docs = search_index.similarity_search_with_score(tema_posta, k=k)\n\n    message_content = '\\n '.join([f'\u041e\u0442\u0440\u044b\u0432\u043e\u043a \u0442\u0435\u043a\u0441\u0442\u0430 \u2116{i+1}\\n{doc[0].page_content}' for i, doc in enumerate(docs)])\n\n    message_content_bez_enter = message_content.replace('\\n', ' ')\n\n     # \u0423\u0434\u0430\u043b\u044f\u0435\u043c \u043e\u0442 \u0434\u0432\u0443\u0445\u043a\u0440\u0430\u0442\u043d\u044b\u0445 \u0434\u043e 20-\u043a\u0440\u0430\u0442\u043d\u044b\u0445 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432\n\n    message_content_bez_enter2 = re.sub(r'\\s{2,20}', ' ', message_content_bez_enter)\n\n    messages = [\n\n        {\"role\": \"system\", \"content\": system},\n\n        {\"role\": \"user\", \"content\": instructions + \"\u0414\u043b\u044f \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0442\u0430 \u0442\u0435\u0431\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430: \" + message_content_bez_enter2},\n\n        ]\n\n\n\n    completion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\n    return completion.choices[0].message.content\n\n\n\ndef gpt_traffic(system, topic, user, search_index, temp=0.5, k=7):\n\n    docs = search_index.similarity_search(topic, k)\n\n    message_content = re.sub(r'\\n{2}', ' ', '\\n '.join([f'\u2116{i+1}.' + doc.page_content for i, doc in enumerate(docs)]))\n\n    messages = [\n\n      {\"role\": \"system\", \"content\": system},\n\n      {\"role\": \"user\", \"content\": f'{user}. \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f: {message_content}. \u041d\u0435 \u0443\u043f\u043e\u043c\u0438\u043d\u0430\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432\u044b\u0448\u0435. \u0417\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: {topic}'}]\n\n    completion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\n    answer = completion.choices[0].message.content\n\n    return answer, message_content\n\n\n## \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u043e\u0441\u0442\u044b\n\n\u0417\u0430\u0431\u0438\u0440\u0430\u0435\u043c \u0438\u0437 \u0433\u0443\u0433\u043b-\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 134 \u043f\u043e\u0441\u0442\u0430 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e ( \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0440\u0430\u0437\u043c\u0435\u0447\u0435\u043d: \u043f\u043e\u0441\u0442\u044b \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u044b \u0434\u0440\u0443\u0433 \u043e\u0442 \u0434\u0440\u0443\u0433\u0430 \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u043c\u0438 ##_)\npost_200 = load_googledoc_by_url(post_Dm)\n\npost_200\n\n\u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 \u043f\u043e\u0441\u0442\u043e\u0432\nall_posts = post_200.split(\"##_\")\n\nprint(len(all_posts))\n\n\u0412\u044b\u0432\u0435\u0434\u0435\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0448\u0435\u0441\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430\nall_posts[5]\n\n## \u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0435\u043c \u043f\u043e\u0441\u0442\u044b \u0432 \u0431\u043b\u043e\u043a\u0438 \u043f\u043e 10 \u043f\u043e\u0441\u0442\u043e\u0432\n\n\u0411\u0443\u0434\u0435\u043c \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u043f\u043e\u0441\u0442\u044b \u0432 \u0431\u043b\u043e\u043a\u0438 \u043f\u043e 10 \u043f\u043e\u0441\u0442\u043e\u0432, \u0430 \u0437\u0430\u0442\u0435\u043c \u0443\u0436\u0435 \u043f\u043e\u0434\u0430\u0432\u0430\u0442\u044c gpt \u0434\u043b\u044f \u0432\u044b\u044f\u0432\u043b\u0435\u043d\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0441\u0442\u0438\u043b\u044f \u043f\u043e\u0441\u0442\u043e\u0432.\n\n>\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u043d\u0443\u0436\u043d\u043e \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u0431\u043b\u043e\u043a\u0438 \u0431\u044b\u043b\u0438 \u043d\u0435 \u043e\u0447\u0435\u043d\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c, \u043d\u043e \u0438 \u043d\u0435 \u043e\u0447\u0435\u043d\u044c \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0438\u0435 (\u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u043c \u0447\u0438\u0441\u043b\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a gpt \u0441 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b, \u0430 \u0441 \u0434\u0440\u0443\u0433\u043e\u0439 - \u0434\u0430\u0435\u043c \u043c\u043e\u0434\u0435\u043b\u0438 \u0431\u041e\u043b\u044c\u0448\u0438\u0439 \u043e\u0431\u044a\u0435\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d \u0440\u0430\u0437)\nnum_post = 10 # \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043a\u043b\u0435\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u043f\u043e\u0441\u0442\u043e\u0432\n\nblock_post_list = create_block_post(all_posts, num_post)\n\nprint(block_post_list)\n\nprint(f'\u0427\u0438\u0441\u043b\u043e \u0431\u043b\u043e\u043a\u043e\u0432 \u043f\u043e 10 \u043f\u043e\u0441\u0442\u043e\u0432 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c: {len(block_post_list)} \u0448\u0442\u0443\u043a')\n\n\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u043a\u043e\u043b-\u0432\u043e \u0441\u043b\u043e\u0432 \u0432 \u0431\u043b\u043e\u043a\u0430\u0445\nfor i,block in enumerate(block_post_list):\n\n    word_count2 = count_words(block)\n\n    print(f'\u0411\u043b\u043e\u043a {i}: \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0432: {word_count2}')\n\n\u0412\u044b\u0432\u0435\u0434\u0435\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u0441\u0442\u043e\u0432:\nprint(block_post_list[-1])\n\n\u0412\u043e\u0437\u044c\u043c\u0435\u043c \u0434\u043b\u044f \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 5 \u0431\u043b\u043e\u043a\u043e\u0432 \u0438\u0437 14 (\u0434\u043b\u044f \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0430). \u0414\u043b\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043d\u0435\u0439\u0440\u043e-\u043a\u043e\u043d\u0442\u0435\u043d\u0442\u043c\u0435\u0439\u043a\u0435\u0440\u0430 \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u0432\u0441\u0435 \u043f\u043e\u0441\u0442\u044b.\nblock_list = block_post_list[:5]\n\nlen(block_list)\n\n\u041e\u0447\u0438\u0441\u0442\u0438\u043c \u0442\u0435\u043a\u0441\u0442\u044b \u043e\u0442 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443, \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u043b \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u0435\u0442\u0430\u043b\u0435\u0439 + \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u044f \u0442\u043e\u043a\u0435\u043d\u043e\u0432 \u043d\u0430 \u043d\u0435\u0437\u043d\u0430\u0447\u0430\u0449\u0438\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u0445\nblock_list_cleaned = [s.replace(\"\\n\", \"\") for s in block_list]\n\nprint(len(block_list_cleaned))", "metadata": {"subid": 1, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n## \u0424\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043f\u043e\u0441\u0442\u043e\u0432:\n#@title \u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043f\u043e\u0441\u0442\u043e\u0432 (\u043c\u043e\u0434\u0435\u043b\u044c GPT): \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u0432 \u0446\u0438\u043a\u043b\u0435 \u0431\u043b\u043e\u043a\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0431\u043b\u043e\u043a\u043e\u0432 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a, \u0441\u043e\u0441\u0442\u043e\u044f\u0449\u0438\u0439 \u0438\u0437 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a, \u0432\u044b\u044f\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u044c\u044e \u0434\u043b\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u0441\u0442\u043e\u0432\n\n# \u0412 \u0446\u0438\u043a\u043b\u0435 \u043f\u043e \u0431\u043b\u043e\u043a\u0430\u043c \u0441\u043f\u0438\u0441\u043a\u0430 posts_list:\n\n#   \u0434\u043b\u044f \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043f\u043e\u0434\u0430\u0435\u043c \u0431\u043b\u043e\u043a\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043e\u0442 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\n#   \u0434\u043b\u044f \u043d\u0435\u043a\u0442\u043e\u0440\u044b\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0442\u0438\u043f\u0430 \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441) \u043f\u043e\u0434\u0430\u0435\u043c \u0431\u043b\u043e\u043a\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u0435\u0437 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043e\u0442 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\n# \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 promt - \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0434\u043b\u044f system\n\n# \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 zapros_i - \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0434\u043b\u044f user, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432 \u0446\u0438\u043a\u043b\u0435 \u0431\u0443\u0434\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u0431\u043b\u043e\u043a \u043f\u043e\u0441\u0442\u043e\u0432 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430\n\ndef nomer_zaprosa(promt, zapros_i, posts_list):\n\n    result_list = []\n\n    # \u0426\u0438\u043a\u043b \u0434\u043b\u044f \u043f\u0440\u043e\u0445\u043e\u0434\u0430 \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u0431\u043b\u043e\u043a\u043e\u0432\n\n    for l,text in enumerate(posts_list): # \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432\n\n        zapros = zapros_i + text\n\n        messages = [\n\n                  {\"role\": \"system\", \"content\": promt},\n\n                  {\"role\": \"user\", \"content\": zapros}\n\n                    ]\n\n        response = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=temp,\n\n                                                max_tokens=max_tok)\n\n        print(\"\u041f\u0440\u043e\u043c\u0442 \", promt)\n\n        print(\"\u0417\u0430\u043f\u0440\u043e\u0441 \", zapros)\n\n        print(\"\\n\u041e\u0442\u0432\u0435\u0442 \u0434\u043b\u044f \", l, \" \u0431\u043b\u043e\u043a\u0430:\\n\\n\", response.choices[0].message.content)\n\n        result_list.append(response.choices[0].message.content)\n\n        print(\"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \", result_list)\n\n    return result_list # \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 GPT \u0432\u044b\u0434\u0435\u043b\u0438\u043b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u0441\u0442\u043e\u0432. \u0414\u043b\u0438\u043d\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0440\u0430\u0432\u043d\u0430 \u0434\u043b\u0438\u043d\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0431\u043b\u043e\u043a\u043e\u0432 \u043f\u043e\u0441\u0442\u043e\u0432\n#@title \u041e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u0435 (\u043c\u043e\u0434\u0435\u043b\u044c GPT + \u0444\u0443\u043d\u043a\u0446\u0438\u044f python): \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u0446\u0438\u043a\u043b\u043e\u043c \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0438 \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442 \u043e\u0434\u043d\u0443 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u0443\u044e \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0443 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0433\u0435\u0440\u0430\n\n\n\n# \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b prompt - \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0434\u043b\u044f system, zapros - \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0434\u043b\u044f user,\n\n# summa - \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u0431\u043b\u043e\u043a\u043e\u0432 \u043f\u043e\u0441\u0442\u043e\u0432 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 + \u043d\u0435\u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u0441\u0442\u043e\u0432\n\n# \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0432\u0441\u0435\u0445 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u0431\u043b\u043e\u043a\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043f\u043e\u0441\u0442\u043e\u0432\n\ndef generalization(summa, prompt, zapros):\n\n    zapros_summa = zapros + summa\n\n    print(\"zapros_summa = \", zapros_summa)\n\n\n\n    messages = [\n\n          {\"role\": \"system\", \"content\": prompt},\n\n          {\"role\": \"user\", \"content\": zapros_summa}\n\n          ]\n\n    response = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=temp,\n\n                                                max_tokens=max_tok)\n\n    print('===========================================: \\n')\n\n    return response.choices[0].message.content\n\n\n\n# \u041d\u0430\u043a\u043e\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f! \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0431\u0435\u0440\u0435\u043c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u043f\u0435\u0440\u0432\u044b\u0435 \u0442\u0440\u0438 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\n\n# (\u0442\u043e \u0435\u0441\u0442\u044c \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0438\u0437 \u043f\u0435\u0440\u0432\u044b\u0445 \u0442\u0440\u0435\u0445 \u0431\u043b\u043e\u043a\u043e\u0432 \u043f\u043e\u0441\u0442\u043e\u0432) - \u0438 \u043e\u0431\u043e\u0431\u0449\u0430\u0435\u043c \u0438\u0445.\n\n# \u041d\u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0438 \u043e\u0431\u043e\u0431\u0449\u0430\u0435\u043c \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0441\u043f\u0438\u0441\u043a\u0430 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a \u0441\n\n# \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0438 \u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435...\n\n\n\ndef summary(promt_s, zapros_s, spisok_b):\n\n    summa = \"\"\n\n    n = 3 # \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0432\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432\n\n    m = n - 1\n\n    summa = ' '.join(spisok_b[:m]) # \u0417\u0434\u0435\u0441\u044c 2 \u043f\u0435\u0440\u0432\u044b\u0445 \u0431\u043b\u043e\u043a\u0430 \u0431\u0435\u0437 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u044f\n\n    for i in range(len(spisok_b) - m):\n\n        summa = summa +  ' ' + spisok_b[i + m]  # \u0434\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c \u0435\u0449\u0435 \u043e\u0434\u0438\u043d \u0431\u043b\u043e\u043a\n\n        summa = generalization(summa, promt_s, zapros_s) # \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u043d\u0435\u0435 + \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0431\u043b\u043e\u043a\u043e\u0432 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430\n\n        print('\\n', i, ' \u043e\u0442\u0432\u0435\u0442 ', summa, '\\n')\n\n        summa = remove_newlines(summa) # \u043e\u0447\u0438\u0449\u0430\u0435\u043c \u043e\u0442 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\n        print(f\"\u041e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0438 {i}: {summa}\")\n\n    return summa\n\n#@title \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0439, \u0432\u0432\u043e\u0434\u043d\u044b\u0445 \u0441\u043b\u043e\u0432 \u0438 \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0442\u0435\u043c (\u0442\u043e \u0435\u0441\u0442\u044c \u0437\u0434\u0435\u0441\u044c \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c \u043d\u0435 \u043e\u0434\u0438\u043d\u043e\u0447\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u0430 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f. \u0414\u043b\u044f \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0439, \u0432\u0432\u043e\u0434\u043d\u044b\u0445 \u0441\u043b\u043e\u0432 \u0438 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0440\u0435\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0440\u0430\u0437\u043c\u0435\u0440 8 \u0441\u043b\u043e\u0432 \u0432 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0438, \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0442\u0435\u043c \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u0435\u0440\u0435\u043c \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e 100 \u0441\u043b\u043e\u0432)\n\n\n\n# \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0444\u0440\u0430\u0437 \u0432 \u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u0439 \u043e\u0442 \u0434\u0443\u0431\u043b\u0438\u043a\u0430\u0442\u043e\u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439\n\ndef clean_list(spisok_slov, target_len):   # target_len = 8 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043a\u0440\u043e\u043c\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0442\u0435\u043c (= 100)\n\n    list_r = []\n\n    for element in spisok_slov:\n\n        split_element = element.split('\\n')   # \u0420\u0430\u0437\u0434\u0435\u043b\u044f\u0435\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0447\u0435\u0440\u0435\u0437 \u043f\u0435\u0440\u0435\u043d\u043e\u0441 \u0441\u0442\u0440\u043e\u043a\u0438 \u043d\u0430 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\n\n        list_r.extend(split_element)          # \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432 \u043d\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439\n\n\n\n    cleaned_list = []       # \u0432 \u044d\u0442\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u043c \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u0435 \u043e\u0442 \u043a\u0430\u0432\u044b\u0447\u0435\u043a, \u0442\u043e\u0447\u0435\u043a, \u0437\u0430\u043f\u044f\u0442\u044b\u0445 \u0438 \u0446\u0438\u0444\u0440\n\n    for element in list_r:\n\n        # \u0423\u0434\u0430\u043b\u044f\u0435\u043c \u043a\u0430\u0432\u044b\u0447\u043a\u0438, \u0437\u0430\u043f\u044f\u0442\u044b\u0435, \u0442\u043e\u0447\u043a\u0438 \u0438 \u0446\u0438\u0444\u0440\u044b\n\n        cleaned_element = ''.join(filter(lambda x: x not in ['\"', ',', '.', ')', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-'], element))\n\n        cleaned_list.append(cleaned_element)\n\n\n\n    list_p = [x.strip() for x in cleaned_list] # \u0423\u0434\u0430\u043b\u044f\u0435\u043c \u043f\u0440\u043e\u0431\u0435\u043b\u044b \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0438 \u043a\u043e\u043d\u0446\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f (\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f)\n\n    list_d = list(set(list_p))   # \u0423\u0434\u0430\u043b\u044f\u0435\u043c \u0434\u0443\u0431\u043b\u0438\u043a\u0430\u0442\u044b\n\n #   sorted_list = sorted(list_d, key=lambda x: len(x)) # \u0421\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u043f\u043e \u0434\u043b\u0438\u043d\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 (\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439)\n\n\n\n    keywords = [\"\u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439\", \"\u0441\u043f\u0438\u0441\u043e\u043a\", \"\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439\", \"\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438\"] #\u0443\u0434\u0430\u043b\u0430\u044f\u0435\u043c \u0442\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u044d\u0442\u0438 \u0441\u043b\u043e\u0432\u0430\n\n    list_\u0441 = [item for item in list_d if not any(keyword in item for keyword in keywords)]\n\n\n\n    list_\u0441\u0441 = list(filter(None, list_\u0441)) # \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u043f\u0443\u0441\u0442\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\n\n    final_list = [item1 for item1 in list_\u0441\u0441 if len(item1.split()) <= target_len]   #\u0431\u0435\u0440\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0433\u0434\u0435 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 target_len \u0441\u043b\u043e\u0432\n\n    return final_list\n\n\n\n#@title \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432 \u0441 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043f\u043e \u0447\u0430\u0441\u0442\u043e\u0442\u043d\u043e\u0441\u0442\u0438. \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 - \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0435\u0445 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432 \u0438\u0437 \u043f\u043e\u0441\u0442\u043e\u0432. \u041e\u0447\u0438\u0449\u0430\u0435\u043c \u044d\u0442\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u043e\u0442 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \"\u200d\" \u0438 \"\u2642\ufe0f\". \u041f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 Counter \u0438\u0437 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 collections \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c \u0447\u0430\u0441\u0442\u043e\u0442\u0443 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0430 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432 \u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u0443\u0435\u043c \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e \u0447\u0438\u0441\u043b\u0443 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0439 (\u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e)\n\nfrom collections import Counter\n\n\n\ndef process_smiley(smiley):\n\n    # \u0441\u043a\u043b\u0435\u0438\u0432\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u0443\u044e \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e\n\n    joined_string = ','.join(map(str, smiley))\n\n    print(joined_string)\n\n\n\n    #\u0434\u0435\u043b\u0438\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a\n\n    split_list = joined_string.split(',')\n\n    print(split_list)\n\n\n\n\n\n    # \u041e\u0447\u0438\u0449\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u043e\u0442 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \"\u200d\" \u0438 \"\u2642\ufe0f\"\n\n    cleaned_list = [item.replace(\" \", \"\").replace(\"\u200d\", \"\").replace(\"\u2642\ufe0f\", \"\") for item in split_list]\n\n\n\n    # \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u043e\u0431\u044a\u0435\u043a\u0442 Counter, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0434\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\n\n    counter = Counter(cleaned_list)\n\n\n\n    # \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432\n\n    ranked_list = sorted(counter.items(), key=lambda x: x[1], reverse=True)\n\n    print(ranked_list)\n\n    new_list = [item[0] for item in ranked_list]\n\n\n\n    return new_list\n\n## \u0421\u0443\u0449\u043d\u043e\u0441\u0442\u0438 (\u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438), \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u0437 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430\n\n- \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n- \u043c\u0430\u043d\u0435\u0440\u0430 \u043f\u0438\u0441\u044c\u043c\u0430\n\n- \u0441\u0442\u0438\u043b\u044c\n\n- \u043b\u0435\u043a\u0441\u0438\u043a\u0430\n\n- \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\n\n- \u044d\u043c\u043e\u0446\u0438\u0438 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c\n\n- \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438\n\n- \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u0435\u043c\u044b\n\n- \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438\n\n- \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\n\n- \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\n\n- \u0441\u043c\u0430\u0439\u043b\u044b \u0438 \u044d\u043c\u043e\u0434\u0436\u0438\n\n- \u0442\u043e\u043f1000 \u0441\u043b\u043e\u0432\n\n\n\n1. \u0412\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0438\u0437 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n2. \u041e\u0431\u043e\u0431\u0449\u0430\u0435\u043c \u0432 \u043e\u0434\u043d\u043e \u043e\u0431\u0449\u0435\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.\n\n3. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u0437\u0430\u043f\u0440\u043e\u0441 \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0432 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e \u0441\u043c\u043e\u0436\u0435\u043c \u043f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u043f\u0440\u043e\u043c\u043f\u0442 \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\n\n\u042d\u0442\u0443 \u0447\u0430\u0441\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0431\u0443\u0434\u0435\u043c \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0434\u043b\u044f \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0440\u0438\u0441\u0442\u0438\u043a \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438:\n\n\n\npromt_ = '''***\u0422\u044b \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0436\u0443\u0440\u043d\u0430\u043b\u0430.\n\n\u0422\u044b \u0440\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u0435\u0448\u044c \u0441 \u0431\u043b\u043e\u0433\u0435\u0440\u043e\u043c \u043b\u0438\u0446\u043e\u043c \u043a \u043b\u0438\u0446\u0443, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0448\u044c \u043e\u0442 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u043b\u0438\u0446\u0430.***'''.\n\n\n\n\u041a\u0440\u043e\u043c\u0435 \u044d\u0442\u043e\u0433\u043e \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u0431\u0443\u0434\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u043b\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u043c\u043f\u0442\u044b.\n### \u0412\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\n\n> \u0412\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c. \u0412\u044b\u0434\u0435\u043b\u044f\u0435\u043c \u0434\u0432\u0443\u043c\u044f \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438 \u0441\u043b\u043e\u0432\u0430, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u0431\u044b\u0447\u043d\u043e \u0431\u043b\u043e\u0433\u0435\u0440 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0441\u0432\u043e\u0439 \u043f\u043e\u0441\u0442.\n\n1. \u041f\u0435\u0440\u0432\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 - \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043c\u043e\u0434\u0435\u043b\u0438 GPT;\n\n2. \u0412\u0442\u043e\u0440\u043e\u0439 - \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 python.\n\n\n\n#### \u0412\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 (\u0432\u0432\u043e\u0434\u043d\u044b\u0435) \u0441\u043b\u043e\u0432\u0430 - \u0432\u044b\u0434\u0435\u043b\u044f\u0435\u043c \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043c\u043e\u0434\u0435\u043b\u0438 GPT\n#00 \u0437\u0430\u043f\u0440\u043e\u0441 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\npromt_ = '''\u0422\u044b \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0436\u0443\u0440\u043d\u0430\u043b\u0430.\n\n\u0422\u044b \u0440\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u0435\u0448\u044c \u0441 \u0431\u043b\u043e\u0433\u0435\u0440\u043e\u043c \u043b\u0438\u0446\u043e\u043c \u043a \u043b\u0438\u0446\u0443, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0448\u044c \u043e\u0442 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u043b\u0438\u0446\u0430.'''\n\npromt_00 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c \u0432 \u043f\u043e\u0441\u0442\u0430\u0445 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u043b\u043e\u0433\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0432 \u0441\u0432\u043e\u0438\u0445 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f\u0445 \u043a \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c.'''\n\nzapros_00 = '''\n\n#1 \u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u0439\u0434\u0438 \u0432 \u043d\u0438\u0445 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 (\u0442\u043e \u0435\u0441\u0442\u044c \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e \u0432 \u0441\u0432\u043e\u0438\u0445 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f\u0445 \u043a \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c);\n\n#2 \u0421\u043e\u0441\u0442\u0430\u0432\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u044d\u0442\u0438\u0445 \u0432\u0432\u043e\u0434\u043d\u044b\u0445 \u0441\u043b\u043e\u0432;\n\n#3 \u0418\u0437 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 \u0443\u0434\u0430\u043b\u0438 \u0432\u0441\u0435 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f, \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438.\n\n\u0421\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0434\u0430\u0439 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 \u043d\u0435\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_00 = nomer_zaprosa(promt_00, zapros_00, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\nresult_list_00\n\n\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u0447\u0438\u0441\u0442\u043a\u0438\nlist_vvslov = clean_list(result_list_00, 8)\n\nprint(\"\u0421\u043b\u043e\u0432\u0430\", list_vvslov)\nsumma_00 = ', '.join(list_vvslov)\n\nprint(summa_00)", "metadata": {"subid": 2, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n#### \u0412\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 (\u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435, \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e \u0431\u0435\u0437 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f GPT). \u0411\u0435\u0440\u0435\u043c \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u0435\u0440\u0432\u044b\u0435 5 \u0441\u043b\u043e\u0432 \u043f\u043e\u0441\u0442\u0430.\n\u0417\u0430\u0431\u0438\u0440\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0444\u0440\u0430\u0437 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u043e \u0438\u0437 \u0412\u0421\u0415\u0425 \u041f\u041e\u0421\u0422\u041e\u0412!!!\ndef get_first_n_words(phrases, n):\n\n    new_list = []\n\n    for phrase in phrases:\n\n        words = phrase.split()[:n]\n\n        new_list.append(\" \".join(words))\n\n    return new_list\n\n\n\n\n\nn = 5\n\n\n\nlist_fraz_progrramno = get_first_n_words(all_posts, n)\n\nprint(list_fraz_progrramno)\n\n\u0423\u0431\u0438\u0440\u0430\u0435\u043c \u0437\u0430\u043f\u044f\u0442\u044b\u0435 \u0432\u043d\u0443\u0442\u0440\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439\n\n\nlist_fraz_clear = [item.replace(',', '') for item in list_fraz_progrramno]\nlen(list_fraz_clear)\nlist_fraz_clear\nsumma_15 = ', '.join(list_fraz_clear)\n\nprint(summa_15)\n\n### \u041c\u0430\u043d\u0435\u0440\u0430 \u043f\u0438\u0441\u044c\u043c\u0430\n#1 \u0437\u0430\u043f\u0440\u043e\u0441 \u043c\u0430\u043d\u0435\u0440\u0430\n\npromt_1 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u043c\u0430\u043d\u0435\u0440\u0443 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.'''\n\nzapros_1 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0434\u043b\u044f \u043c\u0435\u043d\u044f \u043c\u0430\u043d\u0435\u0440\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_1 = nomer_zaprosa(promt_1, zapros_1, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_1\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_1 = [remove_newlines(value) for value in result_list_1]\n\nprint(spisok_1[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 1\n\npromt_b1 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043f\u0440\u043e \u043c\u0430\u043d\u0435\u0440\u0443 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438 \u0431\u043b\u043e\u0433\u0433\u0435\u0440\u0430.'\n\nzapros1 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043c\u043d\u0435 \u043c\u0430\u043d\u0435\u0440\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043c\u043d\u0435 \u043c\u0430\u043d\u0435\u0440\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_1 = summary(promt_b1, zapros1, spisok_1)\nsumma_1\n\n### \u0421\u0442\u0438\u043b\u044c \u043f\u0438\u0441\u044c\u043c\u0430\n#2 \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u0442\u0438\u043b\u044c\n\npromt_2 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0441\u0442\u0438\u043b\u044c \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.'''\n\nzapros_2 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u043c\u043d\u0435 \u0441\u0442\u0438\u043b\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_2 = nomer_zaprosa(promt_2, zapros_2, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_2\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_2 = [remove_newlines(value) for value in result_list_2]\n\nprint(spisok_2[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 2\n\npromt_b2 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u0431\u043b\u043e\u0433\u0433\u0435\u0440\u0443 \u0441\u0442\u0438\u043b\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.'\n\nzapros2 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u043c\u043d\u0435 \u0441\u0442\u0438\u043b\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u043c\u043d\u0435 \u0441\u0442\u0438\u043b\u0435 \u043f\u0438\u0441\u044c\u043c\u0430 \u0438 \u0440\u0435\u0447\u0438.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_2 = summary(promt_b2, zapros2, spisok_2)\nsumma_2\n\n### \u041b\u0435\u043a\u0441\u0438\u043a\u0430\n#3 \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u0431\u043b\u043e\u0433\u0433\u0435\u0440\u0443 \u043b\u0435\u043a\u0441\u0438\u043a\u0430\n\npromt_3 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u043b\u0435\u043a\u0441\u0438\u043a\u0443, \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u0443\u044e \u0431\u043b\u043e\u0433\u0435\u0440\u0443.'''\n\nzapros_3 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043c\u043d\u0435 \u043b\u0435\u043a\u0441\u0438\u043a\u0435.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_3 = nomer_zaprosa(promt_3, zapros_3, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_3\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_3 = [remove_newlines(value) for value in result_list_3]\n\nprint(spisok_3[0])\n# \u041e\u0431\u043e\u0431\u0449\u0430\u0435\u043c \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043b\u0435\u043a\u0441\u0438\u043a\u0435\n\npromt_b3 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0431\u043b\u043e\u0433\u0435\u0440\u0443 \u043b\u0435\u043a\u0441\u0438\u043a\u0435.'\n\nzapros3 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043c\u043d\u0435 \u043b\u0435\u043a\u0441\u0438\u043a\u0435.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043c\u043d\u0435 \u043b\u0435\u043a\u0441\u0438\u043a\u0435.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_3 = summary(promt_b3, zapros3, spisok_3)\nsumma_3\n\n### \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\n\n\u0417\u0434\u0435\u0441\u044c \u043d\u0430 \u0430\u043d\u0430\u043b\u0438\u0437 \u0431\u0443\u0434\u0435\u043c \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0431\u043b\u043e\u043a\u043e\u0432 \u043f\u043e\u0441\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043e\u0447\u0438\u0449\u0430\u043b\u0438 \u043e\u0442 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u0432 \u0441\u0442\u0440\u043e\u043a (\u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043f\u0435\u0440\u0435\u043d\u043e\u0441 \u0441\u0442\u0440\u043e\u043a\u0438 - \u044d\u0442\u043e \u0442\u043e\u0436\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c)\n#4 \u0437\u0430\u043f\u0440\u043e\u0441 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430\n\npromt_4 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u043f\u043e\u0441\u0442\u043e\u0432.'''\n\nzapros_4 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u043c\u043d\u0435 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0435.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_4 = nomer_zaprosa(promt_4, zapros_4, block_list) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c \u0417\u0434\u0435\u0441\u044c \u0432 \u0442\u0440\u0435\u0442\u044c\u0435\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u0435\u0437 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432 \u043d\u0430 \u043d\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443\n\nresult_list_4\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_4 = [remove_newlines(value) for value in result_list_4]\n\nprint(spisok_4[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 4 \u041e\u0431\u043e\u0431\u0449\u0430\u0435\u043c \u0432\u044b\u0432\u043e\u0434\u044b \u043f\u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c\u0443 \u0431\u043b\u043e\u0433\u0435\u0440\u0443 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0443\n\npromt_b4 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u0431\u043b\u043e\u0433\u0435\u0440\u0443 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0435.'\n\nzapros4 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u043c\u043d\u0435 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0435.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e\u0431 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u043c\u043d\u0435 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u0430.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_4 = summary(promt_b4, zapros4, spisok_4)\nsumma_4\n\n### \u042d\u043c\u043e\u0446\u0438\u0438 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c\n\n\u0417\u0434\u0435\u0441\u044c \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u0432\n# 5 \u0437\u0430\u043f\u0440\u043e\u0441 \u044d\u043c\u043e\u0446\u0438\u0438\n\npromt_5 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443 \u043f\u043e\u0441\u0442\u043e\u0432.'''\n\nzapros_5 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0439 \u043e\u043a\u0440\u0430\u0441\u043a\u0435 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_5 = nomer_zaprosa(promt_5, zapros_5, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_5\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_5 = [remove_newlines(value) for value in result_list_5]\n\nprint(spisok_5[0])\npromt_b5 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043f\u0440\u043e \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.'\n\nzapros5 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043f\u0440\u043e \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043f\u0440\u043e \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_5 = summary(promt_b5, zapros5, spisok_5)\nsumma_5\n\n### \u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\n\n\u0417\u0434\u0435\u0441\u044c \u0434\u043b\u044f \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043e\u043f\u044f\u0442\u044c \u043f\u043e\u0434\u0430\u0435\u043c \u0432 gpt \u043f\u043e\u0441\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043e\u0447\u0438\u0449\u0430\u043b\u0438 \u043e\u0442 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u043e\u0432 \u0441\u0442\u0440\u043e\u043a\u0438\n#6 \u0437\u0430\u043f\u0440\u043e\u0441  \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430\n\npromt_6 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430\n\n\u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0434\u043b\u0438\u043d\u0443 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043f\u043e\u0441\u0442\u0430, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438: \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430,\n\n\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u043e\u0432, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u043f\u043e \u0430\u0431\u0437\u0430\u0446\u0430\u043c.'''\n\nzapros_6 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e  \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0434\u043b\u0438\u043d\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u043e\u0431 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445:\n\n\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u043e\u0432, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439,\n\n\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u043f\u043e \u0430\u0431\u0437\u0430\u0446\u0430\u043c.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_6 = nomer_zaprosa(promt_6, zapros_6, block_list)\n\nresult_list_6\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_6 = [remove_newlines(value) for value in result_list_6]\n\nprint(spisok_6[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 6\n\npromt_b6 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0434\u043b\u0438\u043d\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043f\u043e\u0441\u0442\u043e\u0432,\n\n\u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445: \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u043e\u0432, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439,\n\n\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u043f\u043e \u0430\u0431\u0437\u0430\u0446\u0430\u043c \u0432 \u043f\u043e\u0441\u0442\u0430\u0445 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.'''\n\nzapros6 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u043c\u043e\u0438\u043c \u043f\u043e\u0441\u0442\u0430\u043c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0434\u043b\u0438\u043d\u0435\n\n\u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u043e\u0431 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445: \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u043e\u0432,\n\n\u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0442\u0435\u043a\u0441\u0442\u0430 \u043f\u043e \u0430\u0431\u0437\u0430\u0446\u0430\u043c.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445 \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_6 = summary(promt_b6, zapros6, spisok_6)\nsumma_6", "metadata": {"subid": 3, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n### \u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u0435\u043c\u044b\n#7 \u0437\u0430\u043f\u0440\u043e\u0441 \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u0435\u043c\u044b\n\npromt_7 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0435\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u0440\u0438\u0435\u043c\u043e\u0432. '''\n\nzapros_7 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u0440\u0438\u0435\u043c\u0430\u0445.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_7 = nomer_zaprosa(promt_7, zapros_7, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_7\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_7 = [remove_newlines(value) for value in result_list_7]\n\nprint(spisok_7[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 7\n\npromt_b7 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u0440\u0438\u0435\u043c\u043e\u0432 \u0432 \u043f\u043e\u0441\u0442\u0430\u0445 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.'\n\nzapros7 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u0440\u0438\u0435\u043c\u0430\u0445.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e\u0431 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u043b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0445 \u043f\u0440\u0438\u0435\u043c\u043e\u0432 \u0432 \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u0430\u0445.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_7 = summary(promt_b7, zapros7, spisok_7)\nsumma_7\n\n### \u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0431\u043b\u043e\u0433\u0435\u0440\u0430\n#8 \u0437\u0430\u043f\u0440\u043e\u0441 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0431\u043b\u043e\u0433\u0435\u0440\u0430\n\npromt_8 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0431\u043b\u043e\u0433\u0435\u0440\u0430. '''\n\nzapros_8 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445, \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u0438\u0437\u0438\u0440\u0443\u044f \u0438\u0445.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 \u0441 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u0435\u0439.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_8 = nomer_zaprosa(promt_8, zapros_8, block_list) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c \u0431\u0435\u0437 \u043e\u0447\u0438\u0441\u0442\u043a\u0438 \u043e\u0442 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u043e\u0432 \u0441\u0442\u0440\u043e\u043a\u0438\n\nresult_list_8\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_8 = [remove_newlines(value) for value in result_list_8]\n\nprint(spisok_8[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 8\n\npromt_b8 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e\u0431 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445 \u0431\u043b\u043e\u0433\u0435\u0440\u0430.'\n\nzapros8 = '''\u0414\u043e\u043f\u043e\u043b\u043d\u0438 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u043e\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0434\u0438\u043d \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u0440\u0430\u0442\u043a\u0438\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044f\u0445.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_8 = summary(promt_b8, zapros8, spisok_8)\nsumma_8\n\n### \u041f\u0441\u0438\u0445\u043e\u0442\u0438\u043f (\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u043c \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f \u0431\u043b\u043e\u0433\u0435\u0440\u0430)\n# 9 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\n\npromt_9 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f \u0431\u043b\u043e\u0433\u0435\u0440\u0430 \u043f\u043e \u0441\u043e\u0446\u0438\u043e\u043d\u0438\u043a\u0435. '''\n\nzapros_9 = '''\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u0432\u044b\u0432\u043e\u0434 \u043a \u043a\u0430\u043a\u043e\u043c\u0443 \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\u0443 \u043f\u043e \u0441\u043e\u0446\u0438\u043e\u043d\u0438\u043a\u0435 \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f \u043e\u0442\u043d\u0435\u0441\u0442\u0438\n\n\u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432. \u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0432\u044b\u0432\u043e\u0434.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_9 = nomer_zaprosa(promt_9, zapros_9, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_9\n# \u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u0441\u0442\u0440\u043e\u043a\u0438\n\nspisok_9 = [remove_newlines(value) for value in result_list_9]\n\nprint(spisok_9[0])\n# \u0437\u0430\u043f\u0440\u043e\u0441 9\n\npromt_b9 = promt_ + '\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u0431\u043e\u0431\u0449\u0430\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u044b \u043e \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\u0435 \u0431\u043b\u043e\u0433\u0435\u0440\u0430 \u043f\u043e \u0441\u043e\u0446\u0438\u043e\u043d\u0438\u043a\u0435.'\n\nzapros9 = '''\u041e\u0431\u043e\u0431\u0449\u0438 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u044b\u0432\u043e\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 \u043a \u043a\u0430\u043a\u043e\u043c\u0443 \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\u0443 \u043f\u043e \u0441\u043e\u0446\u0438\u043e\u043d\u0438\u043a\u0435 \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f \u043e\u0442\u043d\u0435\u0441\u0442\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0432\u044b\u0432\u043e\u0434 \u043e \u043c\u043e\u0435\u043c \u043f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\u0435 \u043f\u043e \u0441\u043e\u0446\u0438\u043e\u043d\u0438\u043a\u0435.\n\n\u0412\u043e\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0432\u044b\u0432\u043e\u0434\u043e\u0432: '''\n\n\n\nsumma_9 = summary(promt_b9, zapros9, spisok_9)\nsumma_9\n\n### \u042d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\n\n\u0432\u044b\u0434\u0435\u043b\u044f\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0431\u043b\u043e\u0433\u0433\u0435\u0440\n#10 \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u043b\u043e\u0432\u0430\n\npromt_10 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u0433\u0435\u0440\u0443 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.'''\n\nzapros_10 = '''\n\n\u0414\u0430\u0432\u0430\u0439 \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0448\u0430\u0433\u0430\u043c.\n\n1. \u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u044c \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 15 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b\u0445 \u0434\u043b\u044f \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \"\u043d\u0443 \u0440\u0430\u0437\u0432\u0435 \u043d\u0435 \u043a\u0440\u0443\u0442\u043e?\", \"\u0431\u0443\u0434\u0435\u0442 \u043e\u0433\u043e\u043d\u044c\", \"\u0442\u0430\u043a\u043e\u0439 \u043a\u0430\u0439\u0444!\").\n\n2. \u0418\u0441\u043a\u043b\u044e\u0447\u0438 \u0438\u0437 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 \u0432\u0441\u0435 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0436\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u0439 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445 \u043c\u043d\u0435 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_10 = nomer_zaprosa(promt_10, zapros_10, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_10\n\n\u0418\u0441\u0445\u0434\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 \u0434\u043e \u043e\u0447\u0438\u0441\u0442\u043a\u0438\nprint(\"\u0421\u043b\u043e\u0432\u0430\", result_list_10)\n\n\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u0447\u0438\u0441\u0442\u043a\u0438\nlist_emslov = clean_list(result_list_10, 8)\n\nprint(\"\u042d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f: \", list_emslov)\n\nsumma_10 = ', '.join(list_emslov)\n\nprint(summa_10)\n\n### C\u043c\u0430\u0439\u043b\u0438\u043a\u0438\n\n\u0412\u044b\u0434\u0435\u043b\u044f\u0435\u043c \u0438\u0437 \u043f\u043e\u0441\u0442\u043e\u0432 \u0431\u043b\u043e\u0433\u0433\u0435\u0440\u0430 \u0441\u043f\u0438\u0441\u043e\u043a \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0445 \u0438\u043c \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432 \u0438 \u044d\u043c\u043e\u0434\u0436\u0438\n#11 \u0437\u0430\u043f\u0440\u043e\u0441 \u044d\u043c\u043e\u0434\u0437\u0438\n\npromt_11 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u0433\u0435\u0440\u0443 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438.'''\n\nzapros_11 = '''\n\n\u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u043d\u0430\u043f\u0438\u0448\u0438  \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e \u0438\u0437 10 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u043d\u044b\u0445 \u0434\u043b\u044f \u043c\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438.\n\n(\u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u0442\u0432\u0435\u0442\u0430: \ud83d\udd25, \ud83d\ude80, \ud83d\udc49, \u2757\ufe0f, \ud83c\udf81 \u041a\u043e\u043d\u0435\u0446 \u043f\u0440\u0438\u043c\u0435\u0440\u0430). \u0417\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0432 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_11 = nomer_zaprosa(promt_11, zapros_11, block_list_cleaned)\n\n\n\nresult_list_11\nprint(\"\u0421\u043c\u0430\u0439\u043b\u044b\", result_list_11)\nsumma_11 = ', '.join(process_smiley(result_list_11))\nprint(summa_11)\n\n### \u0422\u041e\u041f 15 \u0441\u043b\u043e\u0432\u043e\u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0439\n\n\u0432\u044b\u0434\u0435\u043b\u0435\u043c \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0431\u043b\u043e\u0433\u0433\u0435\u0440\u043e\u043c \u0441\u043b\u043e\u0432\u043e\u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u044f\n#10 \u0437\u0430\u043f\u0440\u043e\u0441 \u0441\u043b\u043e\u0432\u0430\n\npromt_12 = promt_ + '''\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0442\u043e\u0447\u043d\u043e \u0443\u043c\u0435\u0435\u0448\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0431\u043b\u043e\u0433\u0435\u0440\u043e\u043c \u0441\u043b\u043e\u0432\u043e\u0441\u043e\u0447\u0435\u043d\u0442\u0430\u043d\u0438\u044f \u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.'''\n\nzapros_12 = '''\n\n1. \u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b \u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u044c \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 15 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u043c\u043d\u043e\u0439 \u0441\u043b\u043e\u0432\u043e\u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u0439 \u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439,\n\n2. \u0418\u0441\u043a\u043b\u044e\u0447\u0438 \u0438\u0437 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 \u0432\u0441\u0435 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u0439 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a.\n\n\u0412\u043e\u0442 \u043c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b: '''\n\n\n\nresult_list_12 = nomer_zaprosa(promt_12, zapros_12, block_list_cleaned) # \u0432\u044b\u0442\u044f\u0433\u0438\u0432\u0430\u0435\u043c\n\nresult_list_12\n\n\u0418\u0441\u0445\u0434\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 \u0434\u043e \u043e\u0447\u0438\u0441\u0442\u043a\u0438\nprint(\"\u0412\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\", result_list_12)\n\n\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 \u043f\u043e\u0441\u043b\u0435 \u043e\u0447\u0438\u0441\u0442\u043a\u0438\nlist_fraz = clean_list(result_list_12, 8)\n\nprint(\"\u0424\u0440\u0430\u0437\u044b: \", list_fraz)\n\nsumma_12 = ', '.join(list_fraz)\n\nprint(summa_12)\n\n### \u0422\u041e\u041f 1000 \u0441\u043b\u043e\u0432\n\n\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u0441\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u043e\u0431\u044b\u0447\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0431\u043b\u043e\u0433\u0433\u0435\u0440 \u043f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u0441\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432\npost_134 = post_Dm  # URL \u0413\u0443\u0433\u043b\u0414\u043e\u043a\u0430 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043f\u043e\u0441\u0442\u0430\u043c\u0438 \u0414\u043c\u0438\u0442\u0440\u0438\u044f\npost_text = load_googledoc_by_url(post_134)\n\npost_text\ntext = post_text.replace(\"\\n\", \" \")\ntexts_list = []\n\ntexts_list.append(text)\n\n\n# \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043b\u043e\u0432\n\nmaxWordsCount = 2000  # \u0432\u043e\u0437\u044c\u043c\u0435\u043c \u0441 \u0437\u0430\u043f\u0430\u0441\u043e\u043c\n\n\n\n# \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u043c \u0422\u043e\u043a\u0435\u043d\u0430\u0439\u0437\u0435\u0440 \u0432 \u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439\n\ntokenizer = Tokenizer(num_words=maxWordsCount,                                        # \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b-\u0432\u043e \u0441\u043b\u043e\u0432\n\n                      filters='!\"#$%&()*+,-\u2013\u2014./\u2026:;<=>?@[\\\\]^_`{|}~\u00ab\u00bb\\t\\n\\xa0\ufeff\\r\ud83d\udd39\ud83d\udd25\ud83d\udc49\ud83d\ude80\ud83d\udd38\ud83c\udf81\u2728\ud83d\udc47\ud83c\udf0e0123456789\ud83d\udc68\u200d\ud83d\udcbb\ud83e\uddbe\u2666\ufe0f\ud83d\udda5\u2764\ufe0f\u2757\ufe0f\ud83c\udfae\ud83c\udfc1\ud83c\udf93\ud83d\udc69\ud83c\udffb\ud83d\ude31',  # \u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430\n\n                      lower=True, split=' ',                                          # \u0412\u0441\u0435 \u0431\u0443\u043a\u0432\u044b \u043a \u043d\u0438\u0436\u043d\u0435\u043c\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u0432 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u043c\n\n                      oov_token='unknown',                                            # \u041e\u0434\u0438\u043d \u043b\u0435\u0439\u0431\u043b \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u044b\u0445 \u0441\u043b\u043e\u0432\n\n                      char_level=False)                                               # \u0411\u0435\u0437 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432\n\n\n\n# \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u043d\u043e\u0441\u0442\u0438 \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u0439 \u0432\u044b\u0431\u043e\u0440\u043a\u0435\n\ntokenizer.fit_on_texts(texts_list)\n\n\n\ntrain_sequence = tokenizer.texts_to_sequences(texts_list)\n\n\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043b\u043e\u0432\u0430\u0440\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u043d\u043e\u0441\u0442\u0438 \u0441\u043b\u043e\u0432\n\nword_freq = tokenizer.word_counts\n\n\n\n# \u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u043d\u043e\u0441\u0442\u0438\n\nunique_sorted_words = sorted(word_freq, key=word_freq.get, reverse=True)\n\n\n\n# \u0412\u044b\u0432\u043e\u0434 \u043f\u0435\u0440\u0432\u044b\u0445 10 \u0441\u043b\u043e\u0432 \u0441 \u043d\u0430\u0438\u0432\u044b\u0441\u0448\u0435\u0439 \u0447\u0430\u0441\u0442\u043e\u0442\u043e\u0439\n\nprint(unique_sorted_words[:10])\n\n\n\nfiltered_words = [word for word in unique_sorted_words if len(word) > 1 and word != \"unknown\"] # \u0443\u0434\u0430\u043b\u044f\u0435\u043c \u0441\u043b\u043e\u0432\u0430, \u0434\u043b\u0438\u043d\u043e\u0439 1\n\n\n\n# \u0412\u044b\u0432\u043e\u0434 \u043f\u0435\u0440\u0432\u044b\u0445 10 \u0441\u043b\u043e\u0432 \u0441 \u043d\u0430\u0438\u0432\u044b\u0441\u0448\u0435\u0439 \u0447\u0430\u0441\u0442\u043e\u0442\u043e\u0439\n\nprint(filtered_words[:10])\n\nfiltered_words", "metadata": {"subid": 4, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n\u043b\u0435\u043c\u043c\u044b (\u043b\u0435\u043c\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430)\nlemm = get_lemmas(filtered_words)\n\n# \u0412\u044b\u0432\u043e\u0434 \u043b\u0435\u043c\u043c\n\nprint(lemm)\n\n\n\n#unique_words = list(set(lemm))\n\nlemm_1000 = lemm[:1000]     # \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e 1000 \u0441\u043b\u043e\u0432\nsumma_13 = ', '.join(lemm_1000)\n\nprint(summa_13)\n\n###\u0412\u044b\u0432\u0435\u0434\u0435\u043c \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u044f (`summ_`) \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a.\n\n\n\n> \u041f\u0435\u0440\u0435\u043d\u043e\u0441\u044b \u0441\u0442\u0440\u043e\u043a\u0438 \u0441\u0434\u0435\u043b\u0430\u043d\u044b, \u0447\u0442\u043e\u0431\u044b \u0443\u0434\u043e\u0431\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0441\u044e\u0434\u0430 \u0432 \u0433\u0443\u0433\u043b\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0439 \u0440\u0443\u0447\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u043c\u0442\u0430\npromt_n = '\u0422\u044b \u0431\u043b\u043e\u0433\u0435\u0440. \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u043e\u0441\u0442\u044b.......\\n\\n\\n '\n\npromt_1 = '\\n\\n\u041c\u0430\u043d\u0435\u0440\u0430 \u043f\u0438\u0441\u044c\u043c\u0430\\n ' + summa_1\n\npromt_2 = '\\n\\n\u0421\u0442\u0438\u043b\u044c \u043f\u0438\u0441\u044c\u043c\u0430\\n' + summa_2\n\npromt_3 = '\\n\\n\u041b\u0435\u043a\u0441\u0438\u043a\u0430\\n' + summa_3\n\npromt_4 = '\\n\\n\u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\\n' + summa_4\n\npromt_5 = '\\n\\n\u042d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043e\u043a\u0440\u0430\u0441\u043a\u0430 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c\\n' + summa_5\n\npromt_6 = '\\n\\n\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u043e\u0441\u0442\u043e\u0432\\n' + summa_6\n\npromt_7 = '\\n\\n\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u0435\u043c\u044b\\n' + summa_7\n\npromt_8 = '\\n\\n\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438\\n' + summa_8\n\npromt_9 = '\\n\\n\u041f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\\n' + summa_9\n\npromt_00 = '\\n\\n\u0412\u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\\n' + summa_00\n\npromt_10 = '\\n\\n\u042d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\\n' + summa_10\n\npromt_11 = '\\n\\n\u0421\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438\\n' + summa_11\n\npromt_itog = promt_n + promt_1 + promt_2 + promt_3 + promt_4 + promt_5 + promt_6 + promt_7 + promt_8 + promt_9 + promt_00 + promt_10 + promt_11\n\npromt_itog\n\n## \u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u044b\n###\u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442. \u0421\u0442\u0438\u043b\u044c + \u043c\u0430\u043d\u0435\u0440\u0430 + \u0441\u043b\u043e\u0432\u0430 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438\npromt_n = '\u0422\u044b \u0431\u043b\u043e\u0433\u0433\u0435\u0440. \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u043e\u0441\u0442\u044b.......\\n\\n\\n '\n\npromt_1 = '\\n\\n\u041c\u0430\u043d\u0435\u0440\u0430 \u043f\u0438\u0441\u044c\u043c\u0430\\n ' + summa_1\n\npromt_2 = '\\n\\n\u0421\u0442\u0438\u043b\u044c \u043f\u0438\u0441\u044c\u043c\u0430\\n' + summa_2\n\npromt_3 = '\\n\\n\u041b\u0435\u043a\u0441\u0438\u043a\u0430\\n' + summa_3\n\npromt_4 = '\\n\\n\u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\\n' + summa_4\n\npromt_5 = ''#'\\n\\n\u042d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043e\u043a\u0440\u0430\u0441\u043a\u0430 \u0438 \u0442\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c\\n' + summa_5\n\npromt_6 = ''#'\\n\\n\u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043f\u043e\u0441\u0442\u043e\u0432\\n' + summa_6\n\npromt_7 = ''#'\\n\\n\u041b\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u043d\u044b\u0435 \u043f\u0440\u0438\u0435\u043c\u044b\\n' + summa_7\n\npromt_8 = ''#'\\n\\n\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438\\n' + summa_8\n\npromt_9 = ''#'\\n\\n\u041f\u0441\u0438\u0445\u043e\u0442\u0438\u043f\\n' + summa_9\n\npromt_00 = ''#'\\n\\n\u0412\u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\\n' + summa_00\n\npromt_10 = ''#'\\n\\n\u042d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\\n' + summa_10\n\npromt_11 = '\\n\\n\u0421\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438\\n' + summa_11\n\npromt_itog = promt_n + promt_1 + promt_2 + promt_3 + promt_4 + promt_5 + promt_6 + promt_7 + promt_8 + promt_9 + promt_00 + promt_10 + promt_11\n\npromt_itog\nzapros = '''\n\n\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u043c\u0443: \"\u0421\u0442\u0430\u043d\u044c\u0442\u0435 AI \u0438\u043d\u043d\u043e\u0432\u0430\u0442\u043e\u0440\u043e\u043c: \u0421\u0442\u0430\u0440\u0442\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 \u0423\u0418\u0418!\".\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438,\n\n\u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.'''\n\nmessages = [\n\n      {\"role\": \"system\", \"content\": promt_itog},\n\n      {\"role\": \"user\", \"content\": zapros}\n\n      ]\n\n\n\nresponse_8 = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=0.1,\n\n                                                max_tokens=1300)\n\n\n\nprint(response_8.choices[0].message.content)\n\n\n\u0434\u0440\u0443\u0433\u0430\u044f \u0442\u0435\u043c\u0430\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u043c\u0443: \u041a\u0430\u043a \u0440\u0430\u0437\u0432\u043e\u0434\u0438\u0442\u044c \u043a\u0440\u043e\u043b\u0438\u043a\u043e\u0432 \u0432 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445. \u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438, \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.'''\n\nmessages = [\n\n      {\"role\": \"system\", \"content\": promt_itog},\n\n      {\"role\": \"user\", \"content\": zapros}\n\n      ]\n\nresponse_8 = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=0.1,\n\n                                                max_tokens=1300)\n\n\n\nprint(response_8.choices[0].message.content)\n\n###\u0421\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430\n\n\u041f\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u043e\u0432 \u0441\u0442\u0430\u043b\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u043e, \u0447\u0442\u043e GPT \u043f\u0440\u0438 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u043b\u043e\u0433\u0433\u0435\u0440 \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u0442. \u0427\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u0442\u0430\u043a\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a \u0431\u044b\u043b\u043e \u0440\u0435\u0448\u0435\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u043e\u0432 (\u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432) \u0438 \u0432 \u043f\u0440\u043e\u043c\u043f\u0442 \u043f\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b GPT \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b \u0438\u0445 \u0432 \u0441\u0432\u043e\u0435\u043c \u043e\u0442\u0432\u0435\u0442\u0435.\n\n\n\n\u041a\u0430\u043a \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b\u0438: \u0438\u0437 134-\u0445 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u043e\u0434\u0435\u043b\u0438 GPT \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0442\u0435\u043c\u044b \u044d\u0442\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432. \u0417\u0430\u0442\u0435\u043c \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 GPT 98 \u043f\u043e\u0441\u0442\u043e\u0432 \u043d\u0430 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u0435\u043c\u044b.\n\n\n\n\u041b\u0435\u043c\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u043f\u043e\u0441\u0442\u044b GPT \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0442\u043e\u043c\u0443, \u043a\u0430\u043a \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u043b\u0438 \u0432\u044b\u0448\u0435 \u0434\u043b\u044f \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f (\u0441 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043f\u043e \u0447\u0430\u0441\u0442\u043e\u0442\u0435 \u0432\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f).\n\n\n\n\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 *\u0441\u043f\u0438\u0441\u043e\u043a_1000_GPT*, \u0432\u044b\u0447\u043b\u0438 \u0438\u0437 \u043d\u0435\u0433\u043e *\u0441\u043f\u0438\u0441\u043e\u043a_1000_\u0414\u043c\u0438\u0442\u0440\u0438\u044f* \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0440\u0430\u043d\u0436\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432.\n\n\n\n\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0435:\n\n\n\nhttps://docs.google.com/document/d/1iTCQHRGFZlOjAWBIU_k7YDmRd_laQ-sAQy-WeDWHpjk/edit?usp=drive_link\n\n\n\n\u0412\u0440\u0443\u0447\u043d\u0443\u044e \u0441\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u044d\u0442\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a (\u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0442\u0435\u0440\u043c\u0438\u043d\u044b \u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435, \u043d\u0435 \u0442\u0440\u043e\u0433\u0430\u043b\u0438 \u0433\u043b\u0430\u0433\u043e\u043b\u044b). \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0435\u0441\u0442\u044c OpenAI,  \u0430 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432 \u043f\u043e\u043f\u0430\u043b openai. \u0422\u0430\u043a\u0438\u0435 \u0441\u043b\u0443\u0447\u0430\u0438 \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u043b\u0438, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u0443\u0442\u0430\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0432\u044b\u043c\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c\u0438.\n\n\n\n\u041e\u0447\u0438\u0449\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432 \u0437\u0434\u0435\u0441\u044c:\n\n\n\nhttps://docs.google.com/document/d/1zJuKyRQTA_cEX52IXyMmQt9vJnxWYomNs6XKaKIO7K4/edit?usp=drive_link\n###\u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442. \u0412\u0441\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 (\u043f\u0440\u043e\u043c\u043f\u0442 \u0438\u0437 \u0433\u0443\u0433\u043b\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430)\n### \u041f\u0440\u043e\u043c\u0442 \u0438\u0437 \u0433\u0443\u0433\u043b\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\n\n> \u041f\u0440\u043e\u043c\u0442 \u0441\u0434\u0435\u043b\u0430\u043d \u0438\u0437 \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0440\u0443\u0447\u043d\u044b\u043c \"\u043f\u0440\u0438\u0447\u0435\u0441\u044b\u0432\u0430\u0435\u043d\u0438\u0435\u043c\" - \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043b\u043e\u0432. \u0412 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c, \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \"\u0411\u043b\u043e\u0435\u0433\u0433\u0435\u0440 \u043f\u0438\u0448\u0435\u0442 \u0442\u0430\u043a-\u0442\u043e...\" \u043d\u0430 \"\u0422\u044b \u043f\u0438\u0448\u0435\u0448\u044c \u0442\u0430\u043a-\u0442\u043e...\"\n\n\n\n\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0440\u043e\u043c\u0442:\n\n\n\nhttps://docs.google.com/document/d/1cS42a1hVUGFUxterrE95NlffVxaXjowfNmrVX1YCmLA/\n\npromt_i = \"https://docs.google.com/document/d/1cS42a1hVUGFUxterrE95NlffVxaXjowfNmrVX1YCmLA/\" # \u043f\u0440\u043e\u043c\u0442\npromt_b = load_googledoc_by_url(promt_i)\n\npromt_b\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u043c\u0443: \"\u0421\u0442\u0430\u043d\u044c\u0442\u0435 AI \u0438\u043d\u043d\u043e\u0432\u0430\u0442\u043e\u0440\u043e\u043c: \u0421\u0442\u0430\u0440\u0442\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 \u0423\u0418\u0418!\"\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438,\n\n\u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.'''\n\nmessages = [\n\n      {\"role\": \"system\", \"content\": promt_b},\n\n      {\"role\": \"user\", \"content\": zapros}\n\n      ]\n\nresponse_8 = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=0.1,\n\n                                                max_tokens=1300)\n\n\n\nprint(response_8.choices[0].message.content)\n\n\n2 \u0437\u0430\u043f\u0443\u0441\u043a\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u043c\u0443: \"\u0421\u0442\u0430\u043d\u044c\u0442\u0435 AI \u0438\u043d\u043d\u043e\u0432\u0430\u0442\u043e\u0440\u043e\u043c: \u0421\u0442\u0430\u0440\u0442\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 \u0423\u0418\u0418!\".\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438,\n\n\u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.'''\n\nmessages = [\n\n      {\"role\": \"system\", \"content\": promt_b},\n\n      {\"role\": \"user\", \"content\": zapros}\n\n      ]\n\nresponse_8 = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=0.1,\n\n                                                max_tokens=1300)\n\n\n\nprint(response_8.choices[0].message.content)\n\n\n\n\n3 \u0437\u0430\u043f\u0443\u0441\u043a\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u043c\u0443: \"\u0421\u0442\u0430\u043d\u044c\u0442\u0435 AI \u0438\u043d\u043d\u043e\u0432\u0430\u0442\u043e\u0440\u043e\u043c: \u0421\u0442\u0430\u0440\u0442\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 \u0423\u0418\u0418!\".\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438,\n\n\u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.'''\n\nmessages = [\n\n      {\"role\": \"system\", \"content\": promt_b},\n\n      {\"role\": \"user\", \"content\": zapros}\n\n      ]\n\nresponse_8 = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=0.1,\n\n                                                max_tokens=1300)\n\n\n\nprint(response_8.choices[0].message.content)\n\n\n\u0434\u0440\u0443\u0433\u0430\u044f \u0442\u0435\u043c\u0430\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043d\u0430 \u0442\u0435\u043c\u0443: \u041a\u0430\u043a \u0440\u0430\u0437\u0432\u043e\u0434\u0438\u0442\u044c \u043a\u0440\u043e\u043b\u0438\u043a\u043e\u0432 \u0432 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445.\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438,\n\n\u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.'''\n\nmessages = [\n\n      {\"role\": \"system\", \"content\": promt_b},\n\n      {\"role\": \"user\", \"content\": zapros}\n\n      ]\n\nresponse_8 = openai.chat.completions.create(model=MODEL,\n\n                                                messages=messages,\n\n                                                temperature=0.1,\n\n                                                max_tokens=1300)\n\n\n\nprint(response_8.choices[0].message.content)", "metadata": {"subid": 5, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n## \u0413\u0415\u041d\u0415\u0420\u0410\u0426\u0418\u042f \u041f\u041e\u0421\u0422\u041e\u0412:\n\n\u0414\u0430\u043b\u0435\u0435 \u0432\u0441\u0435 \u043f\u043e\u0441\u0442\u044b \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0440\u0430\u0437\u0431\u0438\u043b\u0438 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c:\n\n1.   \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 (https://docs.google.com/document/d/1RhAOgW-K0B5M1yJ31QzAuIp1wGG_cgc-nyCFrU9jcI4)\n\n2.   \u043f\u0440\u043e\u0433\u0440\u0435\u0432 \u043f\u0435\u0440\u0435\u0434 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u043e\u043c (https://docs.google.com/document/d/1cSz9C3dkI_FPvnFZPHZZvHXKvfe2ffele9SPVz2jteg)\n\n3.   \u043f\u0440\u043e\u0434\u0430\u0436\u0430, (500 \u0441\u043b\u043e\u0432) (https://docs.google.com/document/d/1jkRHnLTZ8FPU4OBwDJXQCwToREXv8R1iDpCWt250ubs)\n\n4.   \u043f\u0440\u043e\u0433\u0440\u0435\u0432 \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430. (https://docs.google.com/document/d/13G6z6tfgpFYHUYgYypQhl5sQCCByRFVPPucNDfCP7HE)\n\n\n\n\u041f\u0440\u043e\u0434\u0435\u043b\u0430\u043b\u0438 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0439 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 \u0432\u044b\u0448\u0435 \u0430\u043d\u0430\u043b\u0438\u0437 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0412\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438 \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0434\u0435\u0441\u044c:\n\nhttps://docs.google.com/spreadsheets/d/1qoJ9yGuw1CON1iGFrGe9G_Vb1aC1JX226AiKcS2JSEk/edit?usp=sharing.\n\n\n\n\n\n!!! \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441\u0432\u043e\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f system: \u0432 \u043d\u0438\u0445 \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0440\u0430\u0437\u043d\u044b\u0435 \u043d\u0430\u0431\u043e\u0440\u044b \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u043b\u043e\u0432, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u043e\u0432. \u042d\u0442\u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0431\u044b\u043b\u0438 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u044b \u0438\u0437 \u0433\u0440\u0443\u043f\u043f \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438.\n#@title \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0411\u0430\u0437\u0443 \u0437\u043d\u0430\u043d\u0438\u0439 \u043f\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430\u043c \u0423\u0418\u0418\n\nknowledge_base_link = 'https://docs.google.com/document/d/1iuWXIYy9ODMYnVEfKuM27oSqkcUhbuir8fOc0Pav0IE/'\n\nknowledge_base_text = load_googledoc_by_url(knowledge_base_link)\n\nknowledge_base_index = create_search_index(knowledge_base_text, knowledge_base_link, 1024, 200)\n\n#@title \u0417\u0434\u0435\u0441\u044c \u0437\u0430\u0434\u0430\u0435\u043c \u0441\u0438\u0441\u0442\u0435\u043c \u0434\u043b\u044f \u043c\u043e\u0434\u0435\u043b\u0438-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0430, \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043f\u043e\u0434\u0430\u0435\u0442\u0441\u044f \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0442\u0430 \u0434\u043b\u044f \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043d\u0435\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0435\u0439 \u0441\u0442\u0438\u043b\u044f.\n\nsystem_corrector = '''\n\n  \u0422\u044b \u0441\u0443\u043f\u0435\u0440 \u044d\u043a\u0441\u043f\u0435\u0440\u0442 \u0432 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043b\u0438\u043d\u0433\u0432\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043a\u043e\u043f\u0438\u0440\u0430\u0439\u0442\u0430.\n\n  \u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432. \u0422\u0435\u0431\u0435 \u043d\u0430 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0443 \u0434\u0430\u0434\u0443\u0442 \u043f\u043e\u0441\u0442.\n\n  \u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043f\u043e\u0441\u0442\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0430\u043a\u0438\u0435 \u0444\u0440\u0430\u0437\u044b \u043a\u0430\u043a \"\u043f\u0440\u0438\u0432\u0435\u0442\", \"\u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\", \"\u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435\"),\n\n  \u043d\u0430\u0439\u0442\u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430 (\u0435\u0441\u043b\u0438 \u043e\u043d\u0438 \u0435\u0441\u0442\u044c) \u0438 \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u044b\u0435.\n\n  \u0418\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043b\u0435\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 (\u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043e\u0434\u043d\u043e\u043a\u043e\u0440\u0435\u043d\u043d\u044b\u0435 \u0438\u043b\u0438 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0432 \u0441\u043e\u0441\u0435\u0434\u043d\u0438\u0445 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u0445 \u0438 \u043f\u0440).\n\n  \u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u0442\u0438\u043b\u044c \u0438 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0431\u043b\u043e\u0433\u0435\u0440\u0430, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0436\u0438.\n\n'''\n#@title \u041f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u043e\u0432\n\nstop_list = '''\n\n\u0434\u0440\u0443\u0437\u044c\u044f, \u043f\u0440\u0438\u0432\u0435\u0442, \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, \u0434\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c,\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c, \u0443\u0441\u043f\u0435\u0445, \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435, \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e, \u0440\u0430\u0441\u0448\u0438\u0440\u0438\u0442\u044c, \u0443\u043f\u0443\u0441\u0442\u0438\u0442\u044c, \u0437\u0430\u0434\u0430\u0432\u0430\u0442\u044c,\n\n\u0442\u0440\u0443\u0434, \u0443\u0434\u0430\u0447\u0430, \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0438\u0442\u044c\u0441\u044f, \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b, \u0432\u043a\u043b\u044e\u0447\u0430\u044f, \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435, \u0441\u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0442\u044c, \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0441\u0432\u044f\u0437\u044c,\n\n\u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c, \u0442\u043e\u0447\u043d\u044b\u0439, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430, \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435, \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c, \u043e\u0431\u0440\u0430\u0442\u043d\u044b\u0439,\n\n\u043f\u0443\u0442\u044c, \u0443\u0441\u0438\u043b\u0438\u0435, \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435, \u0432\u043c\u0435\u0441\u0442\u043e, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043e\u0432\u0430\u0442\u044c\u0441\u044f, \u0441\u043a\u043e\u0440\u044b\u0439, \u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c, \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u044b\u0439,\n\n\u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u043a, \u043d\u0435\u0441\u043c\u043e\u0442\u0440\u044f, \u043f\u0440\u0438\u043d\u044f\u0442\u044c, \u0440\u0443\u0442\u0438\u043d\u043d\u044b\u0439, \u043f\u043e\u0433\u0440\u0443\u0437\u0438\u0442\u044c\u0441\u044f, \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f, \u0437\u0430\u0445\u0432\u0430\u0442\u044b\u0432\u0430\u0442\u044c, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435, \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c,\n\n\u0443\u0441\u043a\u043e\u0440\u0438\u0442\u044c, \u043e\u0431\u043d\u0430\u0440\u0443\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c, \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439, \u0448\u0430\u043d\u0441, \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439, \u0441\u043b\u0435\u0434\u0438\u0442\u044c, \u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0439, \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0439, \u0438\u043d\u0442\u0443\u0438\u0442\u0438\u0432\u043d\u043e,\n\n\u0443\u0434\u043e\u0431\u043d\u044b\u0439, \u043e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439, \u0441\u043d\u0438\u0437\u0438\u0442\u044c, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c, \u0432\u043b\u0438\u044f\u043d\u0438\u0435, \u0430\u0434\u0430\u043f\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f, \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435, \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u044c, \u043f\u043e\u0432\u0441\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439, \u0441\u043f\u0430\u0441\u0438\u0431\u043e,\n\n\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c, \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u0435\u0441\u043a\u0438\u0439, \u043c\u044b\u0441\u043b\u044c, \u043f\u0443\u0442\u0451\u043c, \u0437\u0430\u0431\u044b\u0442\u044c, \u043d\u0430\u0434\u0435\u044f\u0442\u044c\u0441\u044f, \u0430\u0432\u0442\u043e\u043d\u043e\u043c\u043d\u044b\u0439, \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0439, \u043d\u0435\u0442\u0435\u0440\u043f\u0435\u043d\u0438\u0435, \u0443\u0432\u0435\u0440\u0438\u0442\u044c, \u0432\u043a\u043b\u0430\u0434,\n\n\u0433\u0438\u0431\u043a\u043e\u0441\u0442\u044c, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c, \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442\u044c, \u0441\u043e\u0432\u0435\u0442, \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439, \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u044f, \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f, \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435,\n\n\u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435, \u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439, \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439, \u0430\u0441\u043f\u0435\u043a\u0442, \u043c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u0435, \u043e\u0431\u043c\u0435\u043d\u0438\u0432\u0430\u0442\u044c\u0441\u044f, \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u0435\u043d\u0438\u0435, \u0440\u0430\u0434, \u0443\u0447\u0438\u0442\u0435\u043b\u044c,\n\n\u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439, \u043f\u0440\u043e\u043c\u044b\u0448\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c, \u043c\u0435\u043d\u044f\u0442\u044c, \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u0435, \u043e\u0442\u0431\u043e\u0440, \u043f\u0440\u043e\u0441\u0442\u043e\u0442\u0430, \u043c\u043e\u0434\u0435\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c, \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439,\n\n\u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440, \u0440\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u0435, \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0439, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435, \u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0439, \u0442\u0440\u0443\u0434\u043e\u0432\u043e\u0439, \u043f\u0440\u0435\u0434\u0441\u0442\u043e\u044f\u0449\u0438\u0439, \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e, \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c,\n\n\u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u044f, \u0441\u0442\u0435\u0441\u043d\u044f\u0442\u044c\u0441\u044f, \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435, \u0438\u043d\u043d\u043e\u0432\u0430\u0446\u0438\u044f, \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c, \u043e\u0446\u0435\u043d\u0438\u0442\u044c\n\n'''\n\n### 1. \u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u041f\u043e\u0441\u0442 \"\u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\"\n\n\u041f\u0440\u043e\u0434\u0430\u0436\u0430, \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u0442\u0435\u043c\u044b \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0437\u043d\u0430\u043d\u0438\u0439 \u043f\u043e AutoML\n\n- \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u043a\u0443\u0440\u0441\u0430 \u0438 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f \u043a\u0430\u0440\u044c\u0435\u0440\u044b \u0432 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f AutoML \u0432 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0442\u0435\u0439:\n\nAutoML - \u044d\u0442\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043c\u044b \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u0443\u0435\u043c\u0441\u044f \u043d\u0430 \u0434\u0432\u0443\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445 AutoML - AutoKeras \u0438 KerasTuner\n#@title \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u043c\u043f\u0442 \u0434\u043b\u044f system, \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0448\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430\n\nsystem_promt = load_googledoc_by_url('https://docs.google.com/document/d/1PRV60TELFZ0TGVkKCnyGkTD0j0aiTTYJtShkhIQWr1Q/')\n\nsystem_promt\n#@title \u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442)\n\n\n\ntema_posta = '''\u041f\u0440\u043e\u0434\u0430\u0436\u0430, \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u0442\u0435\u043c\u044b \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u041f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0437\u043d\u0430\u043d\u0438\u0439 \u043f\u043e AutoML\n\n- \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u043a\u0443\u0440\u0441\u0430 \u0438 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0432\u0438\u0442\u0438\u044f \u043a\u0430\u0440\u044c\u0435\u0440\u044b \u0432 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f AutoML \u0432 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0442\u0435\u0439:\n\nAutoML - \u044d\u0442\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043c\u044b \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u0443\u0435\u043c\u0441\u044f \u043d\u0430 \u0434\u0432\u0443\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445 AutoML - AutoKeras \u0438 KerasTuner'''\n\n\n\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f Telegram \u043d\u0430 \u0442\u0435\u043c\u0443:  ''' + tema_posta + '''. \u041f\u043e\u0441\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0439 \u0441\u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445\n\n\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0439 \u0441\u0432\u043e\u0438\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438.\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0442\u0432\u043e\u0438 \u0447\u0430\u0441\u0442\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438, \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u0432 \u0442\u0432\u043e\u0435\u043c \u0441\u0442\u0438\u043b\u0435 \u0438 \u043c\u0430\u043d\u0435\u0440\u0435, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0442\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430, \u0445\u044d\u0448\u0442\u0435\u0433\u0438, \u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0439 \u043a\u043e\u0434.\n\n\u041d\u0435 \u0441\u0441\u044b\u043b\u0430\u0439\u0441\u044f \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b \u043f\u0440\u0438 \u043e\u0442\u0432\u0435\u0442\u0435. \u041f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u043c\u0438 \u043f\u0440\u043e\u0441\u0442\u044b\u043c\u0438 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u043c\u0438 \u0434\u043b\u0438\u043d\u043e\u0439  \u043e\u0442 4 \u0434\u043e 8 \u0441\u043b\u043e\u0432.\n\n\u0421\u043b\u043e\u0436\u043d\u043e\u043f\u043e\u0434\u0447\u0438\u043d\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0439 \u043d\u0430 \u043f\u0440\u043e\u0441\u0442\u044b\u0435.\n\n\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043b\u043e\u0436\u0438\u0442\u044c\u0441\u044f \u0432 150 \u0441\u043b\u043e\u0432 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043b\u044e\u0431\u0438\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u043e\u0441\u0442\u044b. '''\n\n\n\n\n\nprint(zapros)\n\nresponse_web = answer_index(system_promt, zapros, tema_posta, knowledge_base_index, k=4)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_web))\n#@title \u0415\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u043f\u043e\u0441\u0442 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430 - \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u0438\u0445 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043c\u043e\u0434\u0435\u043b\u0438-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0430\n\nuser = f'\u0412\u043e\u0442 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0438: {response_web}. \u0412\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432: {stop_list}.'\n\n\n\nmessages = [\n\n    {\"role\": \"system\", \"content\": system_corrector},\n\n    {\"role\": \"user\", \"content\": user},\n\n        ]\n\n\n\ncompletion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\nresponse_web_cleaned = completion.choices[0].message.content\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_web_cleaned))", "metadata": {"subid": 6, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n### 2. \u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442 \"\u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043f\u0435\u0440\u0435\u0434 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u043e\u043c\"\n\n\u0422\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u0430: \u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043f\u0435\u0440\u0435\u0434 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u043e\u043c, \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u0442\u0435\u043c\u044b \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0442\u0435\u0439 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e AutoML;\n\n- \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f AutoML \u0432 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0442\u0435\u0439;\n\n- AutoML - \u044d\u0442\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f;\n\n- \u041d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043c\u044b \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u0443\u0435\u043c\u0441\u044f \u043d\u0430 \u0434\u0432\u0443\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445 AutoML - AutoKeras \u0438 KerasTuner.\n#@title \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u043c\u043f\u0442 \u0434\u043b\u044f system, \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0448\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430\n\nsystem_promt = load_googledoc_by_url('https://docs.google.com/document/d/15lKmPNm_VOnAWyh9Iek1LIGC5T42O0G85azsMDmm12o')\n\nsystem_promt\n\n#@title \u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043f\u0435\u0440\u0435\u0434 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u043e\u043c (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442)\n\n\n\ntema_posta = '''\u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043f\u0435\u0440\u0435\u0434 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u043e\u043c, \u043f\u0440\u0438\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435 \u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u0442\u0435\u043c\u044b \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n\u0441\u043e\u043a\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0442\u0435\u0439 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e AutoML.\n\n\u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f AutoML \u0432 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0445 \u0441\u0435\u0442\u0435\u0439.\n\nAutoML - \u044d\u0442\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n\u041d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043c\u044b \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u0443\u0435\u043c\u0441\u044f \u043d\u0430 \u0434\u0432\u0443\u0445 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445 AutoML - AutoKeras \u0438 KerasTuner.\n\n'''\n\n\n\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f Telegram \u043d\u0430 \u0442\u0435\u043c\u0443: ''' + tema_posta + ''''.\n\n\u041f\u043e\u0441\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0439 \u0441\u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0439 \u0441\u0432\u043e\u0438\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438.\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0442\u0432\u043e\u0438 \u0447\u0430\u0441\u0442\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438, \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u0432 \u0442\u0432\u043e\u0435\u043c \u0441\u0442\u0438\u043b\u0435 \u0438 \u043c\u0430\u043d\u0435\u0440\u0435, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0442\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0443 \u0442\u0435\u0431\u044f \u0440\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0442\u043e\u0432. \u0423 \u0442\u0435\u0431\u044f \u0432\u0441\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0447\u0435\u043d\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u0438 \u043f\u0440\u043e\u0441\u0442\u044b\u0435.\n\n\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430: \u0434\u0440\u0443\u0437\u044c\u044f, \u043f\u0440\u0438\u0432\u0435\u0442, \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, \u0434\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u0434\u043e 200 \u0441\u043b\u043e\u0432 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043b\u044e\u0431\u0438\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u043e\u0441\u0442\u044b.' '''\n\n\n\nprint(zapros)\n\nresponse_web_warmup = answer_index(system_promt, zapros, tema_posta, knowledge_base_index, k=4)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_web_warmup))\n#@title \u0415\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u043f\u043e\u0441\u0442 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430 - \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u0438\u0445 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043c\u043e\u0434\u0435\u043b\u0438-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0430\n\nuser = f'\u0412\u043e\u0442 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0438: {response_web_warmup}. \u0412\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432: {stop_list}.'\n\nmessages = [\n\n    {\"role\": \"system\", \"content\": system_corrector},\n\n    {\"role\": \"user\", \"content\": user},\n\n        ]\n\n\n\ncompletion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\nresponse_web_warmup_cleaned = completion.choices[0].message.content\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_web_warmup_cleaned))\n\n\n### 3. \u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442 \"\u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043a\u0443\u0440\u0441\u0430 \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430\"\n\n\u0422\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u0430: DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438:\n\n- \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430 \"DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\"\n\n- \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u043a\u0443\u0440\u0441\u0430 \"DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\" \u043a\u0430\u043a \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438 \u0432 \u0441\u0432\u043e\u0435 \u0431\u0443\u0434\u0443\u0449\u0435\u0435\n\n- \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0434\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430\n\n- \u0411\u043e\u043d\u0443\u0441: \u041f\u0440\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043a\u0443\u0440\u0441\u0430 \"DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\" \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043a\u0443\u0440\u0441 \u043f\u043e AutoML \u0432 \u043f\u043e\u0434\u0430\u0440\u043e\u043a\"\n#@title \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u043c\u043f\u0442 \u0434\u043b\u044f system, \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0448\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430\n\nsystem_promt = load_googledoc_by_url('https://docs.google.com/document/d/1M5pLs_2WWx5GESBZ2n1rQNAoIu4Wcnyokv4NZ8BzRHc')\n\nsystem_promt\n#@title \u041f\u0440\u043e\u0433\u0440\u0435\u0432 \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043a\u0443\u0440\u0441\u0430 \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430 (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442)\n\n# \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0434\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430\n\ntema_posta = '''DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438:\n\n- \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0443\u0440\u0441\u0430 \"DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\"\n\n- \u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0441\u0442\u0438 \u043a\u0443\u0440\u0441\u0430 \"DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\" \u043a\u0430\u043a \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438 \u0432 \u0441\u0432\u043e\u0435 \u0431\u0443\u0434\u0443\u0449\u0435\u0435\n\n- \u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u043a\u0438\u0434\u043a\u0430 \u043d\u0430 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0434\u043b\u044f \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430\n\n- \u0411\u043e\u043d\u0443\u0441: \u041f\u0440\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043a\u0443\u0440\u0441\u0430 \"DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438\" \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043a\u0443\u0440\u0441 \u043f\u043e AutoML \u0432 \u043f\u043e\u0434\u0430\u0440\u043e\u043a\"\n\n'''\n\n\n\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f Telegram \u043d\u0430 \u0442\u0435\u043c\u0443: ''' + tema_posta + ''''.\n\n\u041f\u043e\u0441\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0439 \u0441\u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0439 \u0441\u0432\u043e\u0438\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438.\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0442\u0432\u043e\u0438 \u0447\u0430\u0441\u0442\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438, \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u0432 \u0442\u0432\u043e\u0435\u043c \u0441\u0442\u0438\u043b\u0435 \u0438 \u043c\u0430\u043d\u0435\u0440\u0435, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0442\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0443 \u0442\u0435\u0431\u044f \u0440\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0442\u043e\u0432. \u0423 \u0442\u0435\u0431\u044f \u0432\u0441\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0447\u0435\u043d\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u0438 \u043f\u0440\u043e\u0441\u0442\u044b\u0435.\n\n\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430: \u0434\u0440\u0443\u0437\u044c\u044f, \u043f\u0440\u0438\u0432\u0435\u0442, \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, \u0434\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u0434\u043e 200 \u0441\u043b\u043e\u0432 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043b\u044e\u0431\u0438\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u043e\u0441\u0442\u044b.' '''\n\n\n\nprint(zapros)\n\nresponse_upsale = answer_index(system_promt, zapros, tema_posta, knowledge_base_index, k=4)\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_upsale))\n#@title \u0415\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u043f\u043e\u0441\u0442 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430 - \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u0438\u0445 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043c\u043e\u0434\u0435\u043b\u0438-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0430\n\nuser = f'\u0412\u043e\u0442 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0438: {response_upsale}. \u0412\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432: {stop_list}.'\n\n\n\nmessages = [\n\n    {\"role\": \"system\", \"content\": system_corrector},\n\n    {\"role\": \"user\", \"content\": user},\n\n        ]\n\n\n\ncompletion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\nresponse_upsale_cleaned = completion.choices[0].message.content\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_upsale_cleaned))", "metadata": {"subid": 7, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n### 4. \u0424\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442 \"\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043a\u0443\u0440\u0441\u0430\"\n\n\u0422\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u0430: \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u041a\u0430\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0437\u043d\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430 \u043a\u0443\u0440\u0441\u0435 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438? \u041e\u0431\u0437\u043e\u0440 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0442\u0435\u043c.\n\n- \u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u043c\u0435\u0435\u0442 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u0432 \u043d\u0430\u0448\u0435\u043c \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430? \u041e\u043f\u044b\u0442\u043d\u044b\u0435 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438 \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041f\u043e\u0447\u0435\u043c\u0443 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u043a \u0437\u043d\u0430\u043d\u0438\u044f\u043c, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u043c \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043f\u043e AutoML\n\n#@title \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u043c\u043f\u0442 \u0434\u043b\u044f system, \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0448\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430\n\nsystem_promt = load_googledoc_by_url('https://docs.google.com/document/d/12kVCozpVESPkmnOni-wf5AAh863E47gkPGctC4KTOuk')\n\nsystem_promt\n#@title \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043a\u0443\u0440\u0441\u0430 (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442)\n\n\n\ntema_posta = '''\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u041a\u0430\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0437\u043d\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430 \u043a\u0443\u0440\u0441\u0435 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438? \u041e\u0431\u0437\u043e\u0440 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0442\u0435\u043c.\n\n- \u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u043c\u0435\u0435\u0442 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u0432 \u043d\u0430\u0448\u0435\u043c \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430? \u041e\u043f\u044b\u0442\u043d\u044b\u0435 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438 \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041f\u043e\u0447\u0435\u043c\u0443 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u043a \u0437\u043d\u0430\u043d\u0438\u044f\u043c, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u043c \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043f\u043e AutoML\n\n'''\n\n\n\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f Telegram \u043d\u0430 \u0442\u0435\u043c\u0443: ''' + tema_posta + ''''.\n\n\u041f\u043e\u0441\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0439 \u0441\u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0439 \u0441\u0432\u043e\u0438\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438.\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0442\u0432\u043e\u0438 \u0447\u0430\u0441\u0442\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438, \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u0432 \u0442\u0432\u043e\u0435\u043c \u0441\u0442\u0438\u043b\u0435 \u0438 \u043c\u0430\u043d\u0435\u0440\u0435, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0442\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0443 \u0442\u0435\u0431\u044f \u0440\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0442\u043e\u0432. \u0423 \u0442\u0435\u0431\u044f \u0432\u0441\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0447\u0435\u043d\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u0438 \u043f\u0440\u043e\u0441\u0442\u044b\u0435.\n\n\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430: \u0434\u0440\u0443\u0437\u044c\u044f, \u043f\u0440\u0438\u0432\u0435\u0442, \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, \u0434\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u0434\u043e 500 \u0441\u043b\u043e\u0432 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043b\u044e\u0431\u0438\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u043e\u0441\u0442\u044b.' '''\n\n\n\nprint(zapros)\n\nresponse_sale = answer_index(system_promt, zapros, tema_posta, knowledge_base_index, k=4)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_sale))\n#@title \u0415\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u043f\u043e\u0441\u0442 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430 - \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u0438\u0445 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043c\u043e\u0434\u0435\u043b\u0438-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0430\n\nuser = f'\u0412\u043e\u0442 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0438: {response_sale}. \u0412\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432: {stop_list}.'\n\nmessages = [\n\n    {\"role\": \"system\", \"content\": system_corrector},\n\n    {\"role\": \"user\", \"content\": user},\n\n        ]\n\n\n\ncompletion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\nresponse_sale_cleaned = completion.choices[0].message.content\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_sale_cleaned))\n\n\n### 5. \u042d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442: \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0432 system \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0445\u043e\u0440\u043e\u0448\u0438\u0439 \u043f\u043e\u0441\u0442 \u043f\u043e \u043f\u0440\u043e\u0434\u0430\u0436\u0435 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c, \u0447\u0442\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f\n\n\u0422\u0435\u043c\u0430 \u043f\u043e\u0441\u0442\u0430: \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u041a\u0430\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0437\u043d\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430 \u043a\u0443\u0440\u0441\u0435 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438? \u041e\u0431\u0437\u043e\u0440 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0442\u0435\u043c.\n\n- \u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u043c\u0435\u0435\u0442 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u0432 \u043d\u0430\u0448\u0435\u043c \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430? \u041e\u043f\u044b\u0442\u043d\u044b\u0435 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438 \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041f\u043e\u0447\u0435\u043c\u0443 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u043a \u0437\u043d\u0430\u043d\u0438\u044f\u043c, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u043c \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043f\u043e AutoML\n\n\n\n#@title \u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u043c\u043f\u0442 \u0434\u043b\u044f system, \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0448\u0435 \u0430\u043d\u0430\u043b\u0438\u0437\u0430 \u043f\u043e\u0441\u0442\u043e\u0432 \u0414\u043c\u0438\u0442\u0440\u0438\u044f \u0420\u043e\u043c\u0430\u043d\u043e\u0432\u0430\n\nsystem_promt = load_googledoc_by_url('https://docs.google.com/document/d/1_VQ0Ki-UCsxmBsKfcNnDZ6As36Y5LIEkG6jOzP7B9Rg')\n\nsystem_promt\n#@title \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043a\u0443\u0440\u0441\u0430 (\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u043e\u0441\u0442)\n\n\n\ntema_posta = '''\u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u043e\u0441\u043b\u0435 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0430:\n\n- \u041a\u0430\u043a\u0438\u0435 \u043d\u0430\u0432\u044b\u043a\u0438 \u0438 \u0437\u043d\u0430\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430 \u043a\u0443\u0440\u0441\u0435 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438? \u041e\u0431\u0437\u043e\u0440 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0442\u0435\u043c.\n\n- \u041a\u0430\u043a\u0438\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u0438\u043c\u0435\u0435\u0442 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u0432 \u043d\u0430\u0448\u0435\u043c \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430? \u041e\u043f\u044b\u0442\u043d\u044b\u0435 \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u0438 \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.\n\n- \u041f\u043e\u0447\u0435\u043c\u0443 \u043a\u0443\u0440\u0441 DataScience \u0438 \u043d\u0435\u0439\u0440\u043e\u043d\u043d\u044b\u0435 \u0441\u0435\u0442\u0438 \u0441\u0442\u0430\u043d\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u043a \u0437\u043d\u0430\u043d\u0438\u044f\u043c, \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u043c \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440\u0435 \u043f\u043e AutoML\n\n'''\n\n\n\nzapros = '''\u041d\u0430\u043f\u0438\u0448\u0438 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f Telegram \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u041f\u0440\u043e\u0434\u0430\u0436\u0430 \u043d\u0430 \u0442\u0435\u043c\u0443: ''' + tema_posta + ''''.\n\n\u041f\u043e\u0441\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0439 \u0441\u043e \u0441\u0432\u043e\u0438\u0445 \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439, \u0430 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0439 \u0441\u0432\u043e\u0438\u043c\u0438 \u0437\u0430\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438.\n\n\u041f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0442\u0430\u043c \u0433\u0434\u0435 \u044d\u0442\u043e \u0443\u043c\u0435\u0441\u0442\u043d\u043e \u0442\u0432\u043e\u0438 \u0447\u0430\u0441\u0442\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0441\u043c\u0430\u0439\u043b\u0438\u043a\u0438 \u0438 \u044d\u043c\u043e\u0434\u0437\u0438, \u0432\u0432\u043e\u0434\u043d\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u044b \u043e\u0431\u044b\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u0432 \u0442\u0432\u043e\u0435\u043c \u0441\u0442\u0438\u043b\u0435 \u0438 \u043c\u0430\u043d\u0435\u0440\u0435, \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0443\u044e \u043e\u043a\u0440\u0430\u0441\u043a\u0443, \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 \u0442\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0442\u043e\u0432.\n\n\u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0443 \u0442\u0435\u0431\u044f \u0440\u0432\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u043e\u0441\u0442\u043e\u0432. \u0423 \u0442\u0435\u0431\u044f \u0432\u0441\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043e\u0447\u0435\u043d\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u0438 \u043f\u0440\u043e\u0441\u0442\u044b\u0435.\n\n\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430: \u0434\u0440\u0443\u0437\u044c\u044f, \u043f\u0440\u0438\u0432\u0435\u0442, \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, \u0434\u043e\u0431\u0440\u044b\u0439 \u0434\u0435\u043d\u044c.\n\n\u041f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u0434\u043e 500 \u0441\u043b\u043e\u0432 \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043b\u044e\u0431\u0438\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u043e\u0441\u0442\u044b.' '''\n\n\n\nprint(zapros)\n\nresponse_sale = answer_index(system_promt, zapros, tema_posta, knowledge_base_index, k=4)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_sale))\n#@title \u0415\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u043c\u043e\u0434\u0435\u043b\u044c \u0432 \u043f\u043e\u0441\u0442 \u0432\u043a\u043b\u044e\u0447\u0438\u043b\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0438 \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432\u0430 - \u0443\u0431\u0438\u0440\u0430\u0435\u043c \u0438\u0445 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043c\u043e\u0434\u0435\u043b\u0438-\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0430\n\nuser = f'\u0412\u043e\u0442 \u043f\u043e\u0441\u0442 \u0434\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u043a\u0438: {response_sale}. \u0412\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u043e\u043f-\u0441\u043b\u043e\u0432: {stop_list}.'\n\nmessages = [\n\n    {\"role\": \"system\", \"content\": system_corrector},\n\n    {\"role\": \"user\", \"content\": user},\n\n        ]\n\n\n\ncompletion = openai.chat.completions.create(model=MODEL, messages=messages, temperature=temp)\n\nresponse_sale_cleaned = completion.choices[0].message.content\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_sale_cleaned))", "metadata": {"subid": 8, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n# \u041d\u0435\u0439\u0440\u043e-\u0442\u0440\u0430\u0444\u0438\u043a\u043e\u043b\u043e\u0433\n## \u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\n\n - \u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0445 \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0445 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432\n\n - \u0421\u043f\u0438\u0441\u043a\u0430 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b\n\n - \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u0441\u0442\u043e\u0432 \u043f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u043b\u044e\u0447\u0430\u043c \u0438 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u0441\u0442\u0438\u043b\u0435\n\n\n\n##\u0411\u044b\u043b\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u0445\u043e\u0440\u043e\u0448\u0435\u0433\u043e \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0435\u0433\u043e  \u0442\u0435\u043a\u0441\u0442\u0430:\n\n- \u041d\u0430\u043f\u0438\u0441\u0430\u043d \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438\n\n- \u041e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u043d\u0430 \u043e\u043f\u0430\u0441\u0435\u043d\u0438\u044f, \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438\n\n- \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043d\u044b\u0439\n\n- \u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0432 \u0441\u0435\u0431\u0435 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n\n- \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u043a\u043b\u0438\u043a \u0443 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f\n\n\n\n## \u0424\u043e\u0440\u043c\u0443\u043b\u0430 AIDA \u0434\u043b\u044f \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432 (\u044d\u0442\u0443 \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 \u043f\u0440\u043e\u043c\u043f\u0442\u0435 \u0434\u043b\u044f GPT):\n\nAIDA (\u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435-\u0438\u043d\u0442\u0435\u0440\u0435\u0441-\u0436\u0435\u043b\u0430\u043d\u0438\u0435-\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435).\n\n\u042d\u0442\u043e\u0439 \u0444\u043e\u0440\u043c\u0443\u043b\u0435 \u0431\u043e\u043b\u0435\u0435 100 \u043b\u0435\u0442, \u043d\u043e \u043e\u043d\u0430 \u043d\u0435 \u0442\u0435\u0440\u044f\u0435\u0442 \u0441\u0432\u043e\u0435\u0439 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0430 \u043d\u0430 \u043f\u0441\u0438\u0445\u043e\u043b\u043e\u0433\u0438\u0438 \u043f\u0440\u043e\u0434\u0430\u0436, \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043d\u0430 \u044d\u043c\u043e\u0446\u0438\u0438 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f \u0438 \u043b\u0435\u0433\u043a\u043e \u0430\u0434\u0430\u043f\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f. \u041e\u043d\u0430 \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u043b\u0435\u043d\u0434\u0438\u043d\u0433\u043e\u0432, \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u043e\u0432 \u0442\u043e\u0432\u0430\u0440\u043e\u0432, \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u0431\u0443\u043a\u043b\u0435\u0442\u043e\u0432, \u043f\u043e\u0447\u0442\u043e\u0432\u044b\u0445 \u0440\u0430\u0441\u0441\u044b\u043b\u043e\u043a \u0438 \u0442.\u0434.\n\n\u0421\u0443\u0442\u044c \u043c\u0435\u0442\u043e\u0434\u0430 \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0438 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438 \u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e\u043c \u0438\u043d\u0442\u0440\u0438\u0433\u0443\u044e\u0449\u0435\u0433\u043e \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0438\u043b\u0438 \u043f\u0440\u0438\u0432\u043b\u0435\u043a\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438. \u0417\u0430\u0442\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441 \u043f\u043e\u0434\u043e\u0433\u0440\u0435\u0432\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0430\u043a\u0446\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f \u043d\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435. \u041d\u0430\u0436\u0438\u043c\u0430\u044f \u043d\u0430 \u0431\u043e\u043b\u0435\u0432\u044b\u0435 \u0442\u043e\u0447\u043a\u0438, \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0436\u0435\u043b\u0430\u043d\u0438\u0435 \u043e\u0431\u043b\u0430\u0434\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u043e\u043c. \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u0443 \u043d\u0435\u0433\u043e \u043f\u043e\u044f\u0432\u0438\u043b\u0430\u0441\u044c \u043c\u043e\u0442\u0438\u0432\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043f\u043e\u043a\u0443\u043f\u043a\u0438. \u041e\u0431\u044b\u0447\u043d\u043e \u0442\u0435\u043a\u0441\u0442\u044b \u043f\u043e AIDA \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u044d\u043c\u043e\u0446\u0438\u0438.\n\n\n\n\u041f\u0440\u0438\u043c\u0435\u0440:  \n\n*\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a*: \u0423\u0437\u043d\u0430\u0439\u0442\u0435, \u043a\u0430\u043a \u0435\u0436\u0435\u043c\u0435\u0441\u044f\u0447\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043f\u043e 20 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u0432 \u043f\u0435\u0440\u0432\u0443\u044e \u043b\u0438\u043d\u0438\u044e.  \n\n*\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0443\u0436\u043d\u043e \u043f\u043e\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f \u0432 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0443\u0436\u0435 \u0440\u0435\u0448\u0435\u043d\u0430*:\n\n\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0442\u0435, \u0447\u0442\u043e \u043d\u043e\u0432\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0438 \u043f\u0430\u0440\u0442\u043d\u0435\u0440\u044b \u0441\u0442\u0430\u043d\u043e\u0432\u044f\u0442\u0441\u044f \u043a \u0432\u0430\u043c \u0432 \u043e\u0447\u0435\u0440\u0435\u0434\u044c.  \n\n*\u0423\u0441\u0438\u043b\u0438\u0432\u0430\u0435\u043c \u044d\u0444\u0444\u0435\u043a\u0442*:\n\n\u041d\u0430\u043a\u043e\u043d\u0435\u0446 \u0432\u044b \u0434\u043e\u0441\u0442\u0438\u0433\u043b\u0438 \u0443\u0441\u043f\u0435\u0445\u0430, \u0441\u0442\u0430\u043b\u0438 \u0422\u041e\u041f \u043b\u0438\u0434\u0435\u0440\u043e\u043c. \u0412\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0446\u0435\u043d\u0438\u0442 \u0438 \u0432\u043e\u0441\u0445\u0438\u0449\u0430\u0435\u0442\u0441\u044f \u0432\u0430\u043c\u0438, \u0430 \u0432\u0441\u0435 \u0441\u043a\u0435\u043f\u0442\u0438\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0442\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u043b\u0438 \u043e\u0442 \u0440\u0430\u0431\u043e\u0442\u044b \u0432 \u041c\u041b\u041c, \u0441\u043d\u0438\u043c\u0430\u044e\u0442 \u043f\u0435\u0440\u0435\u0434 \u0432\u0430\u043c\u0438 \u0448\u043b\u044f\u043f\u0443.  \n\n*\u041e\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u043d\u0430 \u0437\u0435\u043c\u043b\u044e* \u0438 \u043d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u0435\u043c, \u0447\u0442\u043e \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0432\u0441\u0435 \u043d\u0435 \u0442\u0430\u043a. \u0427\u0435\u043b\u043e\u0432\u0435\u043a \u0443\u0436\u0435 \u043f\u043e\u0447\u0443\u0432\u0441\u0442\u0432\u043e\u0432\u0430\u043b \u0432\u043a\u0443\u0441 \u043f\u043e\u0431\u0435\u0434\u044b \u0438 \u0436\u0430\u0436\u0434\u0435\u0442 \u0443\u0437\u043d\u0430\u0442\u044c, \u043a\u0430\u043a \u0434\u043e\u0431\u0438\u0442\u044c\u0441\u044f \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430.  \n\n\u0418 \u0432\u044b *\u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0435 \u0435\u043c\u0443 \u043e\u0442\u043b\u0438\u0447\u043d\u043e\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0435*:\n\n\u0417\u0430\u0432\u0442\u0440\u0430 \u044f \u043f\u0440\u043e\u0432\u0435\u0434\u0443 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0439 \u0432\u0435\u0431\u0438\u043d\u0430\u0440, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0440\u0430\u0441\u043a\u0440\u043e\u044e \u0432\u0441\u0435 \u0441\u0435\u043a\u0440\u0435\u0442\u044b \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0440\u0435\u043a\u0440\u0443\u0442\u0438\u043d\u0433\u0430 \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0435.\n\n\u041f\u0440\u0438\u0437\u044b\u0432 \u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e: \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u043f\u0440\u044f\u043c\u043e \u0441\u0435\u0439\u0447\u0430\u0441, \u043f\u043e\u043a\u0430 \u0432\u0430\u0448\u0435 \u043c\u0435\u0441\u0442\u043e \u043d\u0435 \u0437\u0430\u043d\u044f\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439.\n\n## \u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0441\u043e\u0446.\u0441\u0435\u0442\u044f\u0445:\n\n\n\n### \u042f\u043d\u0434\u0435\u043a\u0441 \u0414\u0438\u0440\u0435\u043a\u0442:\n\n\u042f\u043d\u0434\u0435\u043a\u0441.\u0414\u0438\u0440\u0435\u043a\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439:\n\n- \u0434\u043b\u0438\u043d\u0430 \u2014 \u0434\u043e 35 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u043e\u0431\u0435\u043b\u044b \u0438 \u0437\u043d\u0430\u043a\u0438 \u043f\u0440\u0435\u043f\u0438\u043d\u0430\u043d\u0438\u044f, \u043a\u0440\u043e\u043c\u0435 \u0442\u043e\u0447\u0435\u043a, \u0437\u0430\u043f\u044f\u0442\u044b\u0445, \u043a\u0430\u0432\u044b\u0447\u0435\u043a, \u0434\u0432\u043e\u0435\u0442\u043e\u0447\u0438\u0439, \u0442\u043e\u0447\u0435\u043a \u0441 \u0437\u0430\u043f\u044f\u0442\u043e\u0439, \u0432\u043e\u0441\u043a\u043b\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0437\u043d\u0430\u043a\u043e\u0432 (\u0438\u0445 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043e 15);\n\n- \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0436\u0430\u0440\u0433\u043e\u043d\u043d\u044b\u0435 \u0438 \u0433\u0440\u0443\u0431\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0437\u0430\u0432\u0435\u0434\u043e\u043c\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u043d\u044b\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f, \u043f\u0440\u0438\u0437\u044b\u0432\u044b \u043a \u0430\u0433\u0440\u0435\u0441\u0441\u0438\u0438, \u0436\u0435\u0441\u0442\u043e\u043a\u043e\u0441\u0442\u0438 \u0438 \u043d\u0430\u0441\u0438\u043b\u0438\u044e;\n\n- \u043d\u0435\u043b\u044c\u0437\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u0441\u043b\u043e\u0432\u0430 \u0438 \u0444\u0440\u0430\u0437\u044b;\n\n- \u043d\u0435\u043b\u044c\u0437\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0446\u0435\u043d\u044b \u0432 \u0438\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435 \u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b.\n\n\n\n\n\n### \u041f\u043e\u0441\u0435\u0432\u044b \u0432 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c\u043c\n\n\n\n\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u043d\u0435\u0442. \u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043d\u0430\u0442\u0438\u0432\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u0446\u0435\u043f\u0438\u0442 \u0432\u0437\u0433\u043b\u044f\u0434 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f.\n\n- \u0444\u0430\u043a\u0442\u044b, \u0446\u0438\u0444\u0440\u044b, \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f, \u043f\u0440\u0438\u0437\u044b\u0432 \u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e. \u0417\u0434\u0435\u0441\u044c \u043a\u0430\u043a \u0440\u0430\u0437 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u043f\u0438\u0441\u0430\u0442\u044c \u043f\u043e \u043e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043c\u0435\u0442\u043e\u0434\u0438\u043a \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0442\u0435\u043a\u0441\u0442\u043e\u0432.\n\n\n\n## \u0418\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0435 \u043c\u0430\u0440\u043a\u0435\u0442\u043e\u043b\u043e\u0433\u0438 \u0438\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u043b\u044e\u0434\u0438, \u0447\u0435\u0439 \u043a\u043e\u043f\u0438\u0440\u0430\u0439\u0442\u0438\u043d\u0433 \u0438 \u043c\u0430\u043d\u0435\u0440\u0443 \u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0437\u0430 \u043e\u0441\u043d\u043e\u0432\u0443 \u0438 \u043f\u043e\u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u044d\u0442\u0438\u043c:\n\n\n\n\u0414\u044d\u0432\u0438\u0434 \u041e\u0433\u0438\u043b\u0432\u0438;\n\n\u0414\u0436\u043e\u043d \u0421\u044d\u043b\u043c\u043e\u043d;\n\n\u0414\u044d\u0432\u0438\u0434 \u042d\u0431\u0431\u043e\u0442\u0442;\n\n\u041c\u0438\u0445\u0435\u043b\u044c \u0424\u043e\u0440\u0442\u0438\u043d;\n\n\u0414\u044d\u043d \u041a\u0435\u043d\u043d\u0435\u0434\u0438;\n\n\u0424\u0438\u043b\u0438\u043f \u041a\u043e\u0442\u043b\u0435\u0440;\n\n\u0421\u0435\u0442 \u0413\u043e\u0434\u0438\u043d;\n\n\u0413\u044d\u0440\u0438 \u0412\u044d\u0439\u043d\u0447\u0443\u043a.\n\n\n\n\n\n#@title \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438\n\n\n\nsystem_title = '''\n\n\u0422\u044b David Ogilvy. \u0422\u044b \u0430\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0433\u0443\u0440\u0443 \u0438 \u043e\u0441\u043d\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u0432\u043b\u0438\u044f\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432 - Ogilvy & Mather.\n\n\u0422\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0448\u044c \u0432 \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430. \u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0432\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438.\n\n\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0434\u043b\u044f \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0441 \u0430\u043a\u0446\u0435\u043d\u0442\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u0434\u0430\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435.\n\n\u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0441\u0438\u0441\u0442\u0435\u043c: \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u044d\u0442\u043e \u0441\u0430\u043c\u044b\u0439 \u0437\u0430\u043c\u0435\u0442\u043d\u044b\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442, \u0438 \u043e\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u0430,\n\n\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043b\u044e\u0434\u0438 \u0432\u0432\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0439 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.\n\n\u0422\u0432\u043e\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0437\u0430\u0432\u043b\u0435\u043a\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u043f\u0440\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u0438 \u043f\u043e\u0431\u0443\u0436\u0434\u0430\u0442\u044c \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043a\u0443\u043f\u0438\u0442\u044c \u043a\u0443\u0440\u0441 \u0438\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440.\n\n\u0422\u0432\u043e\u0438 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u044b \u0432 \u0442\u0432\u043e\u0435\u043c \u0438\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u043e\u043c \u0441\u0442\u0438\u043b\u0435. \u0422\u044b \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0448\u044c\u0441\u044f \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u043a\u043e\u043f\u0438\u0440\u0430\u0439\u0442\u0435\u0440\u043e\u0432 \u0441\u0432\u043e\u0435\u0439 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c\u044e \u044f\u0441\u043d\u043e \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\n\n\u0432\u044b\u0440\u0430\u0436\u0430\u0442\u044c \u0438\u0434\u0435\u0438. \u0422\u044b \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439 \u0438 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0443 \u043d\u0438\u0445 \u0436\u0435\u043b\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442.\n\n\u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e\u0431 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0445 \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430.\n\n\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0441 \u0430\u043a\u0446\u0435\u043d\u0442\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u0434\u0430\u0451\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435.\n\n\u0411\u0435\u0440\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0442\u043e\u0447\u043d\u043e \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u043d\u0435 \u043f\u0440\u0438\u0434\u0443\u043c\u044b\u0432\u0430\u0439 \u043d\u0438\u0447\u0435\u0433\u043e \u043e\u0442 \u0441\u0435\u0431\u044f.\n\n'''\n\n#\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 35 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u0430\u044f \u043f\u043b\u0430\u0442\u0444\u043e\u0440\u043c\u0430  \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0432 35 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.\n\n\n\ntopic = '\u041d\u0430\u043f\u0438\u0448\u0438 3 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0441 \u0443\u043f\u043e\u0440\u043e\u043c \u043d\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e AI \u043f\u0440\u043e\u0435\u043a\u0442\u0430'\n\n\n\nresponse_title, chunks = gpt_traffic(system_title, topic, '', knowledge_base_index, temp=0.5, k=6)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', response_title)\n#@title \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430\n\n\n\nsystem_keywords = '''\n\n\u0422\u044b David Ogilvy. \u0422\u044b \u0430\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0433\u0443\u0440\u0443 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u0430 \u0438 \u043e\u0441\u043d\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u0432\u043b\u0438\u044f\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432 - Ogilvy & Mather.\n\n\u0422\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0448\u044c \u0432 \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430. \u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0432\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438.\n\n\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0434\u043b\u044f \u042f\u043d\u0434\u0435\u043a\u0441-\u0414\u0438\u0440\u0435\u043a\u0442, \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, google AdWords\n\n\u0411\u0435\u0440\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0442\u043e\u0447\u043d\u043e \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u043d\u0435 \u043f\u0440\u0438\u0434\u0443\u043c\u044b\u0432\u0430\u0439 \u043d\u0438\u0447\u0435\u0433\u043e \u043e\u0442 \u0441\u0435\u0431\u044f.\n\n\u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0445 \u0441\u0438\u0441\u0442\u0435\u043c: \u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043b\u044e\u0434\u0438 \u0432\u0432\u043e\u0434\u044f\u0442 \u0432 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443.\n\n\u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e\u0431 \u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0445 \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0430.\n\n\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0441 \u0430\u043a\u0446\u0435\u043d\u0442\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u0434\u0430\u0451\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0435.\n\n\u0411\u0435\u0440\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0442\u043e\u0447\u043d\u043e \u043f\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0443, \u043d\u0435 \u043f\u0440\u0438\u0434\u0443\u043c\u044b\u0432\u0430\u0439 \u043d\u0438\u0447\u0435\u0433\u043e \u043e\u0442 \u0441\u0435\u0431\u044f.\n\n'''\n\n\n\ntopic = '\u041d\u0430\u043f\u0438\u0448\u0438 10 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u043f\u0440\u043e \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u0441 \u0443\u043f\u043e\u0440\u043e\u043c \u043d\u0430 \u0442\u0440\u0443\u0434\u043e\u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e'\n\n\n\nresponse_keywords, chunks = gpt_traffic(system_keywords, topic, '', knowledge_base_index, temp=0.5, k=6)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', response_keywords)\n#@title \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0439 \u0442\u0435\u043a\u0441\u0442\n\n\n\nsystem_text = '''\u0422\u044b David Ogilvy. \u0422\u044b \u0430\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0433\u0443\u0440\u0443 \u0438 \u043e\u0441\u043d\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u0432\u043b\u0438\u044f\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445\n\n\u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432 - Ogilvy & Mather. \u0422\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0448\u044c \u0432 \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430.\n\n\u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442 \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438. \u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e\n\n\u0440\u0435\u043a\u043b\u0430\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 AIDA (\u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435-\u0438\u043d\u0442\u0435\u0440\u0435\u0441-\u0436\u0435\u043b\u0430\u043d\u0438\u0435-\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435):\n\n#1 Attention - \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e\n\n\u0438\u043d\u0442\u0440\u0438\u0433\u0443\u044e\u0449\u0435\u0433\u043e \u0438 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0438\u043b\u0438 \u0432\u043d\u0443\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u044f;\n\n#2 Interest - \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f, \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441 \u0443 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438 \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c,\n\n\u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0432 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043e\u043b\u044c\u0437\u0435 \u0438\u043b\u0438 \u0446\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 \u0438\u043b\u0438 \u0443\u0441\u043b\u0443\u0433\u0438 \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0432 \u0435\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438.\n\n#3 Desire - \u0417\u0430\u0442\u0435\u043c \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u043d\u0443\u0448\u0438\u0442\u044c \u0436\u0435\u043b\u0430\u043d\u0438\u044f \u0443 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u044f \u0441\u0438\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0431\u0443\u0436\u0434\u0430\u044e\u0449\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b,\n\n\u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u043a\u043b\u0438\u043a \u0443 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f, \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442 \u043f\u0440\u0438\u0432\u043b\u0435\u043a\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c.\n\n\u042d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0441\u0442\u0438\u0447\u044c \u043f\u043e\u043a\u0430\u0437\u043e\u043c \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430, \u043e\u0442\u0437\u044b\u0432\u0430\u043c\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c\n\n\u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439;\n\n#4 Action - \u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043f\u0440\u0438\u0437\u044b\u0432 \u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e: \u043f\u0440\u0438\u0439\u0442\u0438 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u0438\u043b\u0438\n\n\u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043a\u0443\u0440\u0441.\n\n\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 - \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u044b \u0434\u043b\u044f \u042f\u043d\u0434\u0435\u043a\u0441 \u0414\u0438\u0440\u0435\u043a\u0442 \u043f\u043e \u0442\u0435\u043c\u0435 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c.\n\n\u0422\u0432\u043e\u0439 \u0441\u0442\u0438\u043b\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0441\u0442\u044b\u043c, \u043a\u0440\u0430\u0442\u043a\u0438\u043c \u0438 \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c.\n\n\u0422\u044b \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0448\u044c\u0441\u044f \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u043a\u043e\u043f\u0438\u0440\u0430\u0439\u0442\u0435\u0440\u043e\u0432 \u0441\u0432\u043e\u0435\u0439 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c\u044e \u044f\u0441\u043d\u043e \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0432\u044b\u0440\u0430\u0436\u0430\u0442\u044c \u0438\u0434\u0435\u0438.\n\n\u0422\u044b \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439 \u0438 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0443 \u043d\u0438\u0445 \u0436\u0435\u043b\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442.\n\n'''\n\n# \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 250 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u043f\u043e\u0441\u0442\u044b \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0438 \u043a\u043b\u0438\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u044b.\n\n\n\ntopic = '\u0421\u0442\u0430\u043d\u044c\u0442\u0435 AI \u0438\u043d\u043d\u043e\u0432\u0430\u0442\u043e\u0440\u043e\u043c: \u0421\u0442\u0430\u0440\u0442\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 \u0423\u0418\u0418!'\n\n\n\nresponse_text, chunks = gpt_traffic(system_text, topic, '', knowledge_base_index, temp=0.5, k=6)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_text))\n", "metadata": {"subid": 9, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}, {"lc": 1, "type": "constructor", "id": ["langchain", "schema", "document", "Document"], "kwargs": {"page_content": "\n\u0418\u043d\u043e\u0433\u0434\u0430 \u043c\u043e\u0434\u0435\u043b\u044c \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u0444\u043e\u0440\u043c\u0443\u043b\u044b AIDA (\u043a\u0430\u043a \u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u043e\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0443 \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u043f\u0440\u043e\u0434\u0430\u0436\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0435\u0435 \u043f\u0440\u043e\u0441\u0438\u043b\u0438 ).\n\n\u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043c\u0435\u0448\u0430\u0435\u0442 \u043f\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u0430\u043c \u043d\u0443\u0436\u0435\u043d \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442 \u0431\u0435\u0437 \u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0439), \u0442\u043e \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u043f\u0440\u043e\u043c\u043f\u0442 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0432 \u0442\u0435\u043a\u0441\u0442 \u043e\u0431\u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433\u043e\u0432\u043e\u0439 \u0444\u043e\u0440\u043c\u0443\u043b\u044b AIDA.\n\n\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u043c assistant \u0438 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043f\u0440\u0438\u043c\u0435\u0440(\u044b) \u043e\u0436\u0438\u0434\u0430\u0435\u043c\u043e\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u0430 (\u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0430\u043c\u0438).\n#@title \u041f\u0440\u0438\u043c\u0435\u0440 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u0435\u0442 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0432 \u043e\u0442\u0432\u0435\u0442 \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0435 \u0444\u043e\u0440\u043c\u0443\u043b\u044b \u043f\u0440\u043e\u0434\u0430\u0436\u0438 AIDA\n\n\n\nsystem_text = '''\n\n\u0422\u044b David Ogilvy. \u0422\u044b \u0430\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0433\u0443\u0440\u0443 \u0438 \u043e\u0441\u043d\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u0432\u043b\u0438\u044f\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u0441\u0442\u0432 - Ogilvy & Mather.\n\n\u0422\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0448\u044c \u0432 \u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442\u0435 \u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0430. \u0423 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0432\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430\u0445 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438.\n\n\u0422\u0432\u043e\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442\u044b \u0434\u043b\u044f \u042f\u043d\u0434\u0435\u043a\u0441 \u0414\u0438\u0440\u0435\u043a\u0442 \u043f\u043e \u0442\u0435\u043c\u0435 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c. \u0422\u0432\u043e\u0439 \u0441\u0442\u0438\u043b\u044c \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0441\u0442\u044b\u043c \u0438 \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c.\n\n\u0422\u044b \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0448\u044c\u0441\u044f \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0445 \u043a\u043e\u043f\u0438\u0440\u0430\u0439\u0442\u0435\u0440\u043e\u0432 \u0441\u0432\u043e\u0435\u0439 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u044c\u044e \u044f\u0441\u043d\u043e \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0432\u044b\u0440\u0430\u0436\u0430\u0442\u044c \u0438\u0434\u0435\u0438.\n\n\u0422\u044b \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0448\u044c \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0430\u0441\u043f\u0435\u043a\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u0435\u0439 \u0438 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0443 \u043d\u0438\u0445 \u0436\u0435\u043b\u0430\u043d\u0438\u0435 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442.\n\n\u0414\u0430\u0432\u0430\u0439 \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u0448\u0430\u0433\u0430\u043c: \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438, \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043d\u0430\u043f\u0438\u0448\u0438 \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0439 \u0442\u0435\u043a\u0441\u0442,\n\n\u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u043e\u0440\u043c\u0443\u043b\u0435 AIDA. \u0422\u044b \u0437\u043d\u0430\u0435\u0448\u044c \u0444\u043e\u0440\u043c\u0443\u043b\u0443 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0433\u043e \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430 AIDA (\u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435-\u0438\u043d\u0442\u0435\u0440\u0435\u0441-\u0436\u0435\u043b\u0430\u043d\u0438\u0435-\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435):\n\n#1 Attention - \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0438\u043d\u0442\u0440\u0438\u0433\u0443\u044e\u0449\u0435\u0433\u043e \u0438 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e\n\n\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0438\u043b\u0438 \u0432\u043d\u0443\u0448\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u044f;\n\n#2 Interest - \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f, \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441 \u0443 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438 \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0432 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043e\u043b\u044c\u0437\u0435\n\n\u0438\u043b\u0438 \u0446\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430 \u0438\u043b\u0438 \u0443\u0441\u043b\u0443\u0433\u0438 \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0432 \u0435\u0433\u043e \u043e\u0442\u043b\u0438\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438.\n\n#3 Desire - \u0417\u0430\u0442\u0435\u043c \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0432\u043d\u0443\u0448\u0438\u0442\u044c \u0436\u0435\u043b\u0430\u043d\u0438\u044f \u0443 \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u0438, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u044f \u0441\u0438\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0431\u0443\u0436\u0434\u0430\u044e\u0449\u0438\u0435 \u043c\u043e\u043c\u0435\u043d\u0442\u044b, \u044d\u043c\u043e\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u043a\u043b\u0438\u043a \u0443 \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f,\n\n \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442 \u043f\u0440\u0438\u0432\u043b\u0435\u043a\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c. \u042d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0441\u0442\u0438\u0447\u044c \u043f\u043e\u043a\u0430\u0437\u043e\u043c \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430, \u043e\u0442\u0437\u044b\u0432\u0430\u043c\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439;\n\n#4 Action - \u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u043f\u043e\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043f\u0440\u0438\u0437\u044b\u0432 \u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044e: \u043f\u0440\u0438\u0439\u0442\u0438 \u043d\u0430 \u0432\u0435\u0431\u0438\u043d\u0430\u0440 \u0438\u043b\u0438 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043a\u0443\u0440\u0441.\n\n\u0412 \u0441\u0432\u043e\u0439 \u043e\u0442\u0432\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0438\u0439 \u0442\u0435\u043a\u0441\u0442 \u0441 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c. \u0412 \u0441\u0432\u043e\u0435\u043c \u043e\u0442\u0432\u0435\u0442\u0435 \u043d\u0435 \u0443\u043f\u043e\u043c\u0438\u043d\u0430\u0439 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449\u0438\u0445 \u0444\u043e\u0440\u043c\u0443\u043b\u044b AIDA.\n\n'''\n\n# \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u044e\u0449\u0435\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 250 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0435 \u043f\u043e\u0441\u0442\u044b \u0431\u043e\u043b\u0435\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u0438 \u043a\u043b\u0438\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u044b.\n\ntopic = '\u0421\u0442\u0430\u043d\u044c\u0442\u0435 AI \u0438\u043d\u043d\u043e\u0432\u0430\u0442\u043e\u0440\u043e\u043c: \u0421\u0442\u0430\u0440\u0442\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e\u043c \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432 \u0423\u0418\u0418!'\n\n\n\nresponse_text, chunks = gpt_traffic(system_text, topic, '', knowledge_base_index, temp=0.5, k=6)\n\n\n\nprint('\\n\\n\u041f\u043e\u0441\u0442:\\n', insert_newlines_n(response_text))\n\n\n\n\n\n---\n\n\n\n\u041b\u0443\u0447\u0448\u0438\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u043e\u0432\u044b\u0435 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438 \u0432 \u043c\u0438\u0440\u0435 AI - \u044d\u0442\u043e\n\n [GPT \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044f](https://neural-university.ru/laboratory_ai?utm_source=laboratory&utm_medium=content)", "metadata": {"subid": 10, "total": 11, "source": "https://colab.research.google.com/drive/1Tqd79fQ3_Y0pK_VjExwu0GDTjI8gfvvd?usp=sharing"}}}]